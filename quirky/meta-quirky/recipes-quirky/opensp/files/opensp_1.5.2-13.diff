--- opensp-1.5.2.orig/acinclude.m4
+++ opensp-1.5.2/acinclude.m4
@@ -250,6 +250,21 @@
     AC_DEFINE_UNQUOTED($1, "$ac_expanded", $3)) 
 ]) 
 
+AC_DEFUN([AX_DEFINE_DIR], [
+  prefix_NONE=
+  exec_prefix_NONE=
+  test "x$prefix" = xNONE && prefix_NONE=yes && prefix=$ac_default_prefix
+  test "x$exec_prefix" = xNONE && exec_prefix_NONE=yes && exec_prefix=$prefix
+dnl In Autoconf 2.60, ${datadir} refers to ${datarootdir}, which in turn
+dnl refers to ${prefix}.  Thus we have to use `eval' twice.
+  eval ax_define_dir="\"[$]$2\""
+  eval ax_define_dir="\"$ax_define_dir\""
+  AC_SUBST($1, "$ax_define_dir")
+  AC_DEFINE_UNQUOTED($1, "$ax_define_dir", [$3])
+  test "$prefix_NONE" && prefix=NONE
+  test "$exec_prefix_NONE" && exec_prefix=NONE
+])
+
 dnl @synopsis AC_CXX_MUTABLE
 dnl
 dnl If the compiler allows modifying class data members flagged with
--- opensp-1.5.2.orig/autoinit.sh
+++ opensp-1.5.2/autoinit.sh
@@ -21,7 +21,7 @@
 
 basename="$(basename "$0" || echo "$0")"
 
-for command in aclocal autoheader libtoolize "automake --add-missing" autoconf; do
+for command in "aclocal -I m4" autoheader "libtoolize --install --copy" "automake --add-missing --copy --warnings=no-portability" autoconf; do
     echo "$basename: Executing \"${command}\""
     ${command}
     status=$?
--- opensp-1.5.2.orig/config.guess
+++ opensp-1.5.2/config.guess
@@ -1,13 +1,12 @@
 #! /bin/sh
 # Attempt to guess a canonical system name.
-#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
-#   2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
+#   Copyright 1992-2015 Free Software Foundation, Inc.
 
-timestamp='2005-07-08'
+timestamp='2015-08-20'
 
 # This file is free software; you can redistribute it and/or modify it
 # under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
+# the Free Software Foundation; either version 3 of the License, or
 # (at your option) any later version.
 #
 # This program is distributed in the hope that it will be useful, but
@@ -16,26 +15,22 @@
 # General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
-# 02110-1301, USA.
+# along with this program; if not, see <http://www.gnu.org/licenses/>.
 #
 # As a special exception to the GNU General Public License, if you
 # distribute this file as part of a program that contains a
 # configuration script generated by Autoconf, you may include it under
-# the same distribution terms that you use for the rest of that program.
-
-
-# Originally written by Per Bothner <per@bothner.com>.
-# Please send patches to <config-patches@gnu.org>.  Submit a context
-# diff and a properly formatted ChangeLog entry.
+# the same distribution terms that you use for the rest of that
+# program.  This Exception is an additional permission under section 7
+# of the GNU General Public License, version 3 ("GPLv3").
 #
-# This script attempts to guess a canonical system name similar to
-# config.sub.  If it succeeds, it prints the system name on stdout, and
-# exits with 0.  Otherwise, it exits with 1.
+# Originally written by Per Bothner; maintained since 2000 by Ben Elliston.
 #
-# The plan is that this can be called by configure scripts if you
-# don't specify an explicit build system type.
+# You can get the latest version of this script from:
+# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
+#
+# Please send patches to <config-patches@gnu.org>.
+
 
 me=`echo "$0" | sed -e 's,.*/,,'`
 
@@ -55,8 +50,7 @@
 GNU config.guess ($timestamp)
 
 Originally written by Per Bothner.
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
-Free Software Foundation, Inc.
+Copyright 1992-2015 Free Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
 warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
@@ -106,7 +100,7 @@
 trap "exitcode=\$?; (rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null) && exit \$exitcode" 0 ;
 trap "rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null; exit 1" 1 2 13 15 ;
 : ${TMPDIR=/tmp} ;
- { tmp=`(umask 077 && mktemp -d -q "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
+ { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
  { test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir $tmp) ; } ||
  { tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir $tmp) && echo "Warning: creating insecure temp directory" >&2 ; } ||
  { echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; } ;
@@ -138,12 +132,33 @@
 UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
 UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
 
+case "${UNAME_SYSTEM}" in
+Linux|GNU|GNU/*)
+	# If the system lacks a compiler, then just pick glibc.
+	# We could probably try harder.
+	LIBC=gnu
+
+	eval $set_cc_for_build
+	cat <<-EOF > $dummy.c
+	#include <features.h>
+	#if defined(__UCLIBC__)
+	LIBC=uclibc
+	#elif defined(__dietlibc__)
+	LIBC=dietlibc
+	#else
+	LIBC=gnu
+	#endif
+	EOF
+	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`
+	;;
+esac
+
 # Note: order is significant - the case branches are not exclusive.
 
 case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
     *:NetBSD:*:*)
 	# NetBSD (nbsd) targets should (where applicable) match one or
-	# more of the tupples: *-*-netbsdelf*, *-*-netbsdaout*,
+	# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,
 	# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently
 	# switched to ELF, *-*-netbsd* would select the old
 	# object file format.  This provides both forward
@@ -153,22 +168,30 @@
 	# Note: NetBSD doesn't particularly care about the vendor
 	# portion of the name.  We always set it to "unknown".
 	sysctl="sysctl -n hw.machine_arch"
-	UNAME_MACHINE_ARCH=`(/sbin/$sysctl 2>/dev/null || \
-	    /usr/sbin/$sysctl 2>/dev/null || echo unknown)`
+	UNAME_MACHINE_ARCH=`(uname -p 2>/dev/null || \
+	    /sbin/$sysctl 2>/dev/null || \
+	    /usr/sbin/$sysctl 2>/dev/null || \
+	    echo unknown)`
 	case "${UNAME_MACHINE_ARCH}" in
 	    armeb) machine=armeb-unknown ;;
 	    arm*) machine=arm-unknown ;;
 	    sh3el) machine=shl-unknown ;;
 	    sh3eb) machine=sh-unknown ;;
+	    sh5el) machine=sh5le-unknown ;;
+	    earmv*)
+		arch=`echo ${UNAME_MACHINE_ARCH} | sed -e 's,^e\(armv[0-9]\).*$,\1,'`
+		endian=`echo ${UNAME_MACHINE_ARCH} | sed -ne 's,^.*\(eb\)$,\1,p'`
+		machine=${arch}${endian}-unknown
+		;;
 	    *) machine=${UNAME_MACHINE_ARCH}-unknown ;;
 	esac
 	# The Operating System including object format, if it has switched
 	# to ELF recently, or will in the future.
 	case "${UNAME_MACHINE_ARCH}" in
-	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
+	    arm*|earm*|i386|m68k|ns32k|sh3*|sparc|vax)
 		eval $set_cc_for_build
 		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
-			| grep __ELF__ >/dev/null
+			| grep -q __ELF__
 		then
 		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).
 		    # Return netbsd for either.  FIX?
@@ -178,7 +201,14 @@
 		fi
 		;;
 	    *)
-	        os=netbsd
+		os=netbsd
+		;;
+	esac
+	# Determine ABI tags.
+	case "${UNAME_MACHINE_ARCH}" in
+	    earm*)
+		expr='s/^earmv[0-9]/-eabi/;s/eb$//'
+		abi=`echo ${UNAME_MACHINE_ARCH} | sed -e "$expr"`
 		;;
 	esac
 	# The OS release
@@ -191,13 +221,17 @@
 		release='-gnu'
 		;;
 	    *)
-		release=`echo ${UNAME_RELEASE}|sed -e 's/[-_].*/\./'`
+		release=`echo ${UNAME_RELEASE} | sed -e 's/[-_].*//' | cut -d. -f1,2`
 		;;
 	esac
 	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:
 	# contains redundant information, the shorter form:
 	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
-	echo "${machine}-${os}${release}"
+	echo "${machine}-${os}${release}${abi}"
+	exit ;;
+    *:Bitrig:*:*)
+	UNAME_MACHINE_ARCH=`arch | sed 's/Bitrig.//'`
+	echo ${UNAME_MACHINE_ARCH}-unknown-bitrig${UNAME_RELEASE}
 	exit ;;
     *:OpenBSD:*:*)
 	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
@@ -206,19 +240,25 @@
     *:ekkoBSD:*:*)
 	echo ${UNAME_MACHINE}-unknown-ekkobsd${UNAME_RELEASE}
 	exit ;;
+    *:SolidBSD:*:*)
+	echo ${UNAME_MACHINE}-unknown-solidbsd${UNAME_RELEASE}
+	exit ;;
     macppc:MirBSD:*:*)
-	echo powerppc-unknown-mirbsd${UNAME_RELEASE}
+	echo powerpc-unknown-mirbsd${UNAME_RELEASE}
 	exit ;;
     *:MirBSD:*:*)
 	echo ${UNAME_MACHINE}-unknown-mirbsd${UNAME_RELEASE}
 	exit ;;
+    *:Sortix:*:*)
+	echo ${UNAME_MACHINE}-unknown-sortix
+	exit ;;
     alpha:OSF1:*:*)
 	case $UNAME_RELEASE in
 	*4.0)
 		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
 		;;
 	*5.*)
-	        UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $4}'`
+		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $4}'`
 		;;
 	esac
 	# According to Compaq, /usr/sbin/psrinfo has been available on
@@ -264,7 +304,10 @@
 	# A Xn.n version is an unreleased experimental baselevel.
 	# 1.2 uses "1.2" for uname -r.
 	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[PVTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
-	exit ;;
+	# Reset EXIT trap before exiting to avoid spurious non-zero exit code.
+	exitcode=$?
+	trap '' 0
+	exit $exitcode ;;
     Alpha\ *:Windows_NT*:*)
 	# How do we know it's Interix rather than the generic POSIX subsystem?
 	# Should we change UNAME_MACHINE based on the output of uname instead
@@ -290,12 +333,12 @@
 	echo s390-ibm-zvmoe
 	exit ;;
     *:OS400:*:*)
-        echo powerpc-ibm-os400
+	echo powerpc-ibm-os400
 	exit ;;
     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
 	echo arm-acorn-riscix${UNAME_RELEASE}
 	exit ;;
-    arm:riscos:*:*|arm:RISCOS:*:*)
+    arm*:riscos:*:*|arm*:RISCOS:*:*)
 	echo arm-unknown-riscos
 	exit ;;
     SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
@@ -319,14 +362,33 @@
 	case `/usr/bin/uname -p` in
 	    sparc) echo sparc-icl-nx7; exit ;;
 	esac ;;
+    s390x:SunOS:*:*)
+	echo ${UNAME_MACHINE}-ibm-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	exit ;;
     sun4H:SunOS:5.*:*)
 	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
 	exit ;;
     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
 	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
 	exit ;;
-    i86pc:SunOS:5.*:*)
-	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+    i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
+	echo i386-pc-auroraux${UNAME_RELEASE}
+	exit ;;
+    i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
+	eval $set_cc_for_build
+	SUN_ARCH="i386"
+	# If there is a compiler, see if it is configured for 64-bit objects.
+	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
+	# This test works for both compilers.
+	if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
+	    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \
+		(CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
+		grep IS_64BIT_ARCH >/dev/null
+	    then
+		SUN_ARCH="x86_64"
+	    fi
+	fi
+	echo ${SUN_ARCH}-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
 	exit ;;
     sun4*:SunOS:6*:*)
 	# According to config.sub, this is the proper way to canonicalize
@@ -370,23 +432,23 @@
     # MiNT.  But MiNT is downward compatible to TOS, so this should
     # be no problem.
     atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
-        echo m68k-atari-mint${UNAME_RELEASE}
+	echo m68k-atari-mint${UNAME_RELEASE}
 	exit ;;
     atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
 	echo m68k-atari-mint${UNAME_RELEASE}
-        exit ;;
+	exit ;;
     *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
-        echo m68k-atari-mint${UNAME_RELEASE}
+	echo m68k-atari-mint${UNAME_RELEASE}
 	exit ;;
     milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
-        echo m68k-milan-mint${UNAME_RELEASE}
-        exit ;;
+	echo m68k-milan-mint${UNAME_RELEASE}
+	exit ;;
     hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
-        echo m68k-hades-mint${UNAME_RELEASE}
-        exit ;;
+	echo m68k-hades-mint${UNAME_RELEASE}
+	exit ;;
     *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
-        echo m68k-unknown-mint${UNAME_RELEASE}
-        exit ;;
+	echo m68k-unknown-mint${UNAME_RELEASE}
+	exit ;;
     m68k:machten:*:*)
 	echo m68k-apple-machten${UNAME_RELEASE}
 	exit ;;
@@ -456,8 +518,8 @@
 	echo m88k-motorola-sysv3
 	exit ;;
     AViiON:dgux:*:*)
-        # DG/UX returns AViiON for all architectures
-        UNAME_PROCESSOR=`/usr/bin/uname -p`
+	# DG/UX returns AViiON for all architectures
+	UNAME_PROCESSOR=`/usr/bin/uname -p`
 	if [ $UNAME_PROCESSOR = mc88100 ] || [ $UNAME_PROCESSOR = mc88110 ]
 	then
 	    if [ ${TARGET_BINARY_INTERFACE}x = m88kdguxelfx ] || \
@@ -470,7 +532,7 @@
 	else
 	    echo i586-dg-dgux${UNAME_RELEASE}
 	fi
- 	exit ;;
+	exit ;;
     M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
 	echo m88k-dolphin-sysv3
 	exit ;;
@@ -527,15 +589,16 @@
 		echo rs6000-ibm-aix3.2
 	fi
 	exit ;;
-    *:AIX:*:[45])
+    *:AIX:*:[4567])
 	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
 	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
 		IBM_ARCH=rs6000
 	else
 		IBM_ARCH=powerpc
 	fi
-	if [ -x /usr/bin/oslevel ] ; then
-		IBM_REV=`/usr/bin/oslevel`
+	if [ -x /usr/bin/lslpp ] ; then
+		IBM_REV=`/usr/bin/lslpp -Lqc bos.rte.libc |
+			   awk -F: '{ print $3 }' | sed s/[0-9]*$/0/`
 	else
 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
 	fi
@@ -570,52 +633,52 @@
 	    9000/[678][0-9][0-9])
 		if [ -x /usr/bin/getconf ]; then
 		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`
-                    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`
-                    case "${sc_cpu_version}" in
-                      523) HP_ARCH="hppa1.0" ;; # CPU_PA_RISC1_0
-                      528) HP_ARCH="hppa1.1" ;; # CPU_PA_RISC1_1
-                      532)                      # CPU_PA_RISC2_0
-                        case "${sc_kernel_bits}" in
-                          32) HP_ARCH="hppa2.0n" ;;
-                          64) HP_ARCH="hppa2.0w" ;;
+		    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`
+		    case "${sc_cpu_version}" in
+		      523) HP_ARCH="hppa1.0" ;; # CPU_PA_RISC1_0
+		      528) HP_ARCH="hppa1.1" ;; # CPU_PA_RISC1_1
+		      532)                      # CPU_PA_RISC2_0
+			case "${sc_kernel_bits}" in
+			  32) HP_ARCH="hppa2.0n" ;;
+			  64) HP_ARCH="hppa2.0w" ;;
 			  '') HP_ARCH="hppa2.0" ;;   # HP-UX 10.20
-                        esac ;;
-                    esac
+			esac ;;
+		    esac
 		fi
 		if [ "${HP_ARCH}" = "" ]; then
 		    eval $set_cc_for_build
-		    sed 's/^              //' << EOF >$dummy.c
+		    sed 's/^		//' << EOF >$dummy.c
+
+		#define _HPUX_SOURCE
+		#include <stdlib.h>
+		#include <unistd.h>
+
+		int main ()
+		{
+		#if defined(_SC_KERNEL_BITS)
+		    long bits = sysconf(_SC_KERNEL_BITS);
+		#endif
+		    long cpu  = sysconf (_SC_CPU_VERSION);
 
-              #define _HPUX_SOURCE
-              #include <stdlib.h>
-              #include <unistd.h>
-
-              int main ()
-              {
-              #if defined(_SC_KERNEL_BITS)
-                  long bits = sysconf(_SC_KERNEL_BITS);
-              #endif
-                  long cpu  = sysconf (_SC_CPU_VERSION);
-
-                  switch (cpu)
-              	{
-              	case CPU_PA_RISC1_0: puts ("hppa1.0"); break;
-              	case CPU_PA_RISC1_1: puts ("hppa1.1"); break;
-              	case CPU_PA_RISC2_0:
-              #if defined(_SC_KERNEL_BITS)
-              	    switch (bits)
-              		{
-              		case 64: puts ("hppa2.0w"); break;
-              		case 32: puts ("hppa2.0n"); break;
-              		default: puts ("hppa2.0"); break;
-              		} break;
-              #else  /* !defined(_SC_KERNEL_BITS) */
-              	    puts ("hppa2.0"); break;
-              #endif
-              	default: puts ("hppa1.0"); break;
-              	}
-                  exit (0);
-              }
+		    switch (cpu)
+			{
+			case CPU_PA_RISC1_0: puts ("hppa1.0"); break;
+			case CPU_PA_RISC1_1: puts ("hppa1.1"); break;
+			case CPU_PA_RISC2_0:
+		#if defined(_SC_KERNEL_BITS)
+			    switch (bits)
+				{
+				case 64: puts ("hppa2.0w"); break;
+				case 32: puts ("hppa2.0n"); break;
+				default: puts ("hppa2.0"); break;
+				} break;
+		#else  /* !defined(_SC_KERNEL_BITS) */
+			    puts ("hppa2.0"); break;
+		#endif
+			default: puts ("hppa1.0"); break;
+			}
+		    exit (0);
+		}
 EOF
 		    (CCOPTS= $CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null) && HP_ARCH=`$dummy`
 		    test -z "$HP_ARCH" && HP_ARCH=hppa
@@ -635,7 +698,7 @@
 	    # => hppa64-hp-hpux11.23
 
 	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) |
-		grep __LP64__ >/dev/null
+		grep -q __LP64__
 	    then
 		HP_ARCH="hppa2.0w"
 	    else
@@ -706,22 +769,22 @@
 	exit ;;
     C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
 	echo c1-convex-bsd
-        exit ;;
+	exit ;;
     C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
 	if getsysinfo -f scalar_acc
 	then echo c32-convex-bsd
 	else echo c2-convex-bsd
 	fi
-        exit ;;
+	exit ;;
     C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
 	echo c34-convex-bsd
-        exit ;;
+	exit ;;
     C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
 	echo c38-convex-bsd
-        exit ;;
+	exit ;;
     C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
 	echo c4-convex-bsd
-        exit ;;
+	exit ;;
     CRAY*Y-MP:*:*:*)
 	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
 	exit ;;
@@ -745,14 +808,14 @@
 	exit ;;
     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
 	FUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
-        FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
-        FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
-        echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
-        exit ;;
+	FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
+	FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
+	echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+	exit ;;
     5000:UNIX_System_V:4.*:*)
-        FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
-        FUJITSU_REL=`echo ${UNAME_RELEASE} | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/ /_/'`
-        echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+	FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
+	FUJITSU_REL=`echo ${UNAME_RELEASE} | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/ /_/'`
+	echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
 	exit ;;
     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
 	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}
@@ -764,27 +827,51 @@
 	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
 	exit ;;
     *:FreeBSD:*:*)
-	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+	UNAME_PROCESSOR=`/usr/bin/uname -p`
+	case ${UNAME_PROCESSOR} in
+	    amd64)
+		echo x86_64-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
+	    *)
+		echo ${UNAME_PROCESSOR}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
+	esac
 	exit ;;
     i*:CYGWIN*:*)
 	echo ${UNAME_MACHINE}-pc-cygwin
 	exit ;;
-    i*:MINGW*:*)
+    *:MINGW64*:*)
+	echo ${UNAME_MACHINE}-pc-mingw64
+	exit ;;
+    *:MINGW*:*)
 	echo ${UNAME_MACHINE}-pc-mingw32
 	exit ;;
+    *:MSYS*:*)
+	echo ${UNAME_MACHINE}-pc-msys
+	exit ;;
     i*:windows32*:*)
-    	# uname -m includes "-pc" on this system.
-    	echo ${UNAME_MACHINE}-mingw32
+	# uname -m includes "-pc" on this system.
+	echo ${UNAME_MACHINE}-mingw32
 	exit ;;
     i*:PW*:*)
 	echo ${UNAME_MACHINE}-pc-pw32
 	exit ;;
-    x86:Interix*:[34]*)
-	echo i586-pc-interix${UNAME_RELEASE}|sed -e 's/\..*//'
-	exit ;;
+    *:Interix*:*)
+	case ${UNAME_MACHINE} in
+	    x86)
+		echo i586-pc-interix${UNAME_RELEASE}
+		exit ;;
+	    authenticamd | genuineintel | EM64T)
+		echo x86_64-unknown-interix${UNAME_RELEASE}
+		exit ;;
+	    IA64)
+		echo ia64-unknown-interix${UNAME_RELEASE}
+		exit ;;
+	esac ;;
     [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)
 	echo i${UNAME_MACHINE}-pc-mks
 	exit ;;
+    8664:Windows_NT:*)
+	echo x86_64-pc-mks
+	exit ;;
     i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
 	# How do we know it's Interix rather than the generic POSIX subsystem?
 	# It also conflicts with pre-2.0 versions of AT&T UWIN. Should we
@@ -794,7 +881,7 @@
     i*:UWIN*:*)
 	echo ${UNAME_MACHINE}-pc-uwin
 	exit ;;
-    amd64:CYGWIN*:*:*)
+    amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
 	echo x86_64-unknown-cygwin
 	exit ;;
     p*:CYGWIN*:*)
@@ -805,179 +892,160 @@
 	exit ;;
     *:GNU:*:*)
 	# the GNU system
-	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
+	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-${LIBC}`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
 	exit ;;
     *:GNU/*:*:*)
 	# other systems with GNU libc and userland
-	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu
+	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-${LIBC}
 	exit ;;
     i*86:Minix:*:*)
 	echo ${UNAME_MACHINE}-pc-minix
 	exit ;;
+    aarch64:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
+    aarch64_be:Linux:*:*)
+	UNAME_MACHINE=aarch64_be
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
+    alpha:Linux:*:*)
+	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+	  EV5)   UNAME_MACHINE=alphaev5 ;;
+	  EV56)  UNAME_MACHINE=alphaev56 ;;
+	  PCA56) UNAME_MACHINE=alphapca56 ;;
+	  PCA57) UNAME_MACHINE=alphapca56 ;;
+	  EV6)   UNAME_MACHINE=alphaev6 ;;
+	  EV67)  UNAME_MACHINE=alphaev67 ;;
+	  EV68*) UNAME_MACHINE=alphaev68 ;;
+	esac
+	objdump --private-headers /bin/sh | grep -q ld.so.1
+	if test "$?" = 0 ; then LIBC="gnulibc1" ; fi
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
+    arc:Linux:*:* | arceb:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
     arm*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	eval $set_cc_for_build
+	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
+	    | grep -q __ARM_EABI__
+	then
+	    echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	else
+	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
+		| grep -q __ARM_PCS_VFP
+	    then
+		echo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabi
+	    else
+		echo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabihf
+	    fi
+	fi
+	exit ;;
+    avr32*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
 	exit ;;
     cris:Linux:*:*)
-	echo cris-axis-linux-gnu
+	echo ${UNAME_MACHINE}-axis-linux-${LIBC}
 	exit ;;
     crisv32:Linux:*:*)
-	echo crisv32-axis-linux-gnu
+	echo ${UNAME_MACHINE}-axis-linux-${LIBC}
+	exit ;;
+    e2k:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
 	exit ;;
     frv:Linux:*:*)
-    	echo frv-unknown-linux-gnu
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
+    hexagon:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
+    i*86:Linux:*:*)
+	echo ${UNAME_MACHINE}-pc-linux-${LIBC}
 	exit ;;
     ia64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
 	exit ;;
     m32r*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
 	exit ;;
     m68*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
 	exit ;;
-    mips:Linux:*:*)
+    mips:Linux:*:* | mips64:Linux:*:*)
 	eval $set_cc_for_build
 	sed 's/^	//' << EOF >$dummy.c
 	#undef CPU
-	#undef mips
-	#undef mipsel
+	#undef ${UNAME_MACHINE}
+	#undef ${UNAME_MACHINE}el
 	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
-	CPU=mipsel
+	CPU=${UNAME_MACHINE}el
 	#else
 	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
-	CPU=mips
+	CPU=${UNAME_MACHINE}
 	#else
 	CPU=
 	#endif
 	#endif
 EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
-	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
+	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`
+	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-${LIBC}"; exit; }
 	;;
-    mips64:Linux:*:*)
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
-	#undef CPU
-	#undef mips64
-	#undef mips64el
-	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
-	CPU=mips64el
-	#else
-	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
-	CPU=mips64
-	#else
-	CPU=
-	#endif
-	#endif
-EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
-	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
-	;;
-    ppc:Linux:*:*)
-	echo powerpc-unknown-linux-gnu
+    openrisc*:Linux:*:*)
+	echo or1k-unknown-linux-${LIBC}
 	exit ;;
-    ppc64:Linux:*:*)
-	echo powerpc64-unknown-linux-gnu
+    or32:Linux:*:* | or1k*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
 	exit ;;
-    alpha:Linux:*:*)
-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
-	  EV5)   UNAME_MACHINE=alphaev5 ;;
-	  EV56)  UNAME_MACHINE=alphaev56 ;;
-	  PCA56) UNAME_MACHINE=alphapca56 ;;
-	  PCA57) UNAME_MACHINE=alphapca56 ;;
-	  EV6)   UNAME_MACHINE=alphaev6 ;;
-	  EV67)  UNAME_MACHINE=alphaev67 ;;
-	  EV68*) UNAME_MACHINE=alphaev68 ;;
-        esac
-	objdump --private-headers /bin/sh | grep ld.so.1 >/dev/null
-	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
-	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
+    padre:Linux:*:*)
+	echo sparc-unknown-linux-${LIBC}
+	exit ;;
+    parisc64:Linux:*:* | hppa64:Linux:*:*)
+	echo hppa64-unknown-linux-${LIBC}
 	exit ;;
     parisc:Linux:*:* | hppa:Linux:*:*)
 	# Look for CPU level
 	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
-	  PA7*) echo hppa1.1-unknown-linux-gnu ;;
-	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
-	  *)    echo hppa-unknown-linux-gnu ;;
+	  PA7*) echo hppa1.1-unknown-linux-${LIBC} ;;
+	  PA8*) echo hppa2.0-unknown-linux-${LIBC} ;;
+	  *)    echo hppa-unknown-linux-${LIBC} ;;
 	esac
 	exit ;;
-    parisc64:Linux:*:* | hppa64:Linux:*:*)
-	echo hppa64-unknown-linux-gnu
+    ppc64:Linux:*:*)
+	echo powerpc64-unknown-linux-${LIBC}
+	exit ;;
+    ppc:Linux:*:*)
+	echo powerpc-unknown-linux-${LIBC}
+	exit ;;
+    ppc64le:Linux:*:*)
+	echo powerpc64le-unknown-linux-${LIBC}
+	exit ;;
+    ppcle:Linux:*:*)
+	echo powerpcle-unknown-linux-${LIBC}
 	exit ;;
     s390:Linux:*:* | s390x:Linux:*:*)
-	echo ${UNAME_MACHINE}-ibm-linux
+	echo ${UNAME_MACHINE}-ibm-linux-${LIBC}
 	exit ;;
     sh64*:Linux:*:*)
-    	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
 	exit ;;
     sh*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
 	exit ;;
     sparc:Linux:*:* | sparc64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
+    tile*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
+    vax:Linux:*:*)
+	echo ${UNAME_MACHINE}-dec-linux-${LIBC}
 	exit ;;
     x86_64:Linux:*:*)
-	echo x86_64-unknown-linux-gnu
+	echo ${UNAME_MACHINE}-pc-linux-${LIBC}
+	exit ;;
+    xtensa*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
 	exit ;;
-    i*86:Linux:*:*)
-	# The BFD linker knows what the default object file format is, so
-	# first see if it will tell us. cd to the root directory to prevent
-	# problems with other programs or directories called `ld' in the path.
-	# Set LC_ALL=C to ensure ld outputs messages in English.
-	ld_supported_targets=`cd /; LC_ALL=C ld --help 2>&1 \
-			 | sed -ne '/supported targets:/!d
-				    s/[ 	][ 	]*/ /g
-				    s/.*supported targets: *//
-				    s/ .*//
-				    p'`
-        case "$ld_supported_targets" in
-	  elf32-i386)
-		TENTATIVE="${UNAME_MACHINE}-pc-linux-gnu"
-		;;
-	  a.out-i386-linux)
-		echo "${UNAME_MACHINE}-pc-linux-gnuaout"
-		exit ;;
-	  coff-i386)
-		echo "${UNAME_MACHINE}-pc-linux-gnucoff"
-		exit ;;
-	  "")
-		# Either a pre-BFD a.out linker (linux-gnuoldld) or
-		# one that does not give us useful --help.
-		echo "${UNAME_MACHINE}-pc-linux-gnuoldld"
-		exit ;;
-	esac
-	# Determine whether the default compiler is a.out or elf
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
-	#include <features.h>
-	#ifdef __ELF__
-	# ifdef __GLIBC__
-	#  if __GLIBC__ >= 2
-	LIBC=gnu
-	#  else
-	LIBC=gnulibc1
-	#  endif
-	# else
-	LIBC=gnulibc1
-	# endif
-	#else
-	#ifdef __INTEL_COMPILER
-	LIBC=gnu
-	#else
-	LIBC=gnuaout
-	#endif
-	#endif
-	#ifdef __dietlibc__
-	LIBC=dietlibc
-	#endif
-EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
-	test x"${LIBC}" != x && {
-		echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
-		exit
-	}
-	test x"${TENTATIVE}" != x && { echo "${TENTATIVE}"; exit; }
-	;;
     i*86:DYNIX/ptx:4*:*)
 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
 	# earlier versions are messed up and put the nodename in both
@@ -985,11 +1053,11 @@
 	echo i386-sequent-sysv4
 	exit ;;
     i*86:UNIX_SV:4.2MP:2.*)
-        # Unixware is an offshoot of SVR4, but it has its own version
-        # number series starting with 2...
-        # I am not positive that other SVR4 systems won't match this,
+	# Unixware is an offshoot of SVR4, but it has its own version
+	# number series starting with 2...
+	# I am not positive that other SVR4 systems won't match this,
 	# I just have to hope.  -- rms.
-        # Use sysv4.2uw... so that sysv4* matches it.
+	# Use sysv4.2uw... so that sysv4* matches it.
 	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}
 	exit ;;
     i*86:OS/2:*:*)
@@ -1006,7 +1074,7 @@
     i*86:syllable:*:*)
 	echo ${UNAME_MACHINE}-pc-syllable
 	exit ;;
-    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.0*:*)
+    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)
 	echo i386-unknown-lynxos${UNAME_RELEASE}
 	exit ;;
     i*86:*DOS:*:*)
@@ -1021,7 +1089,7 @@
 	fi
 	exit ;;
     i*86:*:5:[678]*)
-    	# UnixWare 7.x, OpenUNIX and OpenServer 6.
+	# UnixWare 7.x, OpenUNIX and OpenServer 6.
 	case `/bin/uname -X | grep "^Machine"` in
 	    *486*)	     UNAME_MACHINE=i486 ;;
 	    *Pentium)	     UNAME_MACHINE=i586 ;;
@@ -1049,10 +1117,13 @@
 	exit ;;
     pc:*:*:*)
 	# Left here for compatibility:
-        # uname -m prints for DJGPP always 'pc', but it prints nothing about
-        # the processor, so we play safe by assuming i386.
-	echo i386-pc-msdosdjgpp
-        exit ;;
+	# uname -m prints for DJGPP always 'pc', but it prints nothing about
+	# the processor, so we play safe by assuming i586.
+	# Note: whatever this is, it MUST be the same as what config.sub
+	# prints for the "djgpp" host, or else GDB configury will decide that
+	# this is a cross-build.
+	echo i586-pc-msdosdjgpp
+	exit ;;
     Intel:Mach:3*:*)
 	echo i386-pc-mach3
 	exit ;;
@@ -1087,8 +1158,18 @@
 	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
 	  && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
     3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
-        /bin/uname -p 2>/dev/null | grep 86 >/dev/null \
-          && { echo i486-ncr-sysv4; exit; } ;;
+	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+	  && { echo i486-ncr-sysv4; exit; } ;;
+    NCR*:*:4.2:* | MPRAS*:*:4.2:*)
+	OS_REL='.3'
+	test -r /etc/.relid \
+	    && OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
+	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+	    && { echo i486-ncr-sysv4.3${OS_REL}; exit; }
+	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
+	    && { echo i586-ncr-sysv4.3${OS_REL}; exit; }
+	/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \
+	    && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
 	echo m68k-unknown-lynxos${UNAME_RELEASE}
 	exit ;;
@@ -1101,7 +1182,7 @@
     rs6000:LynxOS:2.*:*)
 	echo rs6000-unknown-lynxos${UNAME_RELEASE}
 	exit ;;
-    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.0*:*)
+    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)
 	echo powerpc-unknown-lynxos${UNAME_RELEASE}
 	exit ;;
     SM[BE]S:UNIX_SV:*:*)
@@ -1121,10 +1202,10 @@
 		echo ns32k-sni-sysv
 	fi
 	exit ;;
-    PENTIUM:*:4.0*:*) # Unisys `ClearPath HMP IX 4000' SVR4/MP effort
-                      # says <Richard.M.Bartel@ccMail.Census.GOV>
-        echo i586-unisys-sysv4
-        exit ;;
+    PENTIUM:*:4.0*:*)	# Unisys `ClearPath HMP IX 4000' SVR4/MP effort
+			# says <Richard.M.Bartel@ccMail.Census.GOV>
+	echo i586-unisys-sysv4
+	exit ;;
     *:UNIX_System_V:4*:FTX*)
 	# From Gerald Hewes <hewes@openmarket.com>.
 	# How about differentiating between stratus architectures? -djm
@@ -1150,11 +1231,11 @@
 	exit ;;
     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
 	if [ -d /usr/nec ]; then
-	        echo mips-nec-sysv${UNAME_RELEASE}
+		echo mips-nec-sysv${UNAME_RELEASE}
 	else
-	        echo mips-unknown-sysv${UNAME_RELEASE}
+		echo mips-unknown-sysv${UNAME_RELEASE}
 	fi
-        exit ;;
+	exit ;;
     BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
 	echo powerpc-be-beos
 	exit ;;
@@ -1164,6 +1245,12 @@
     BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
 	echo i586-pc-beos
 	exit ;;
+    BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
+	echo i586-pc-haiku
+	exit ;;
+    x86_64:Haiku:*:*)
+	echo x86_64-unknown-haiku
+	exit ;;
     SX-4:SUPER-UX:*:*)
 	echo sx4-nec-superux${UNAME_RELEASE}
 	exit ;;
@@ -1173,6 +1260,15 @@
     SX-6:SUPER-UX:*:*)
 	echo sx6-nec-superux${UNAME_RELEASE}
 	exit ;;
+    SX-7:SUPER-UX:*:*)
+	echo sx7-nec-superux${UNAME_RELEASE}
+	exit ;;
+    SX-8:SUPER-UX:*:*)
+	echo sx8-nec-superux${UNAME_RELEASE}
+	exit ;;
+    SX-8R:SUPER-UX:*:*)
+	echo sx8r-nec-superux${UNAME_RELEASE}
+	exit ;;
     Power*:Rhapsody:*:*)
 	echo powerpc-apple-rhapsody${UNAME_RELEASE}
 	exit ;;
@@ -1181,10 +1277,31 @@
 	exit ;;
     *:Darwin:*:*)
 	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
-	case $UNAME_PROCESSOR in
-	    *86) UNAME_PROCESSOR=i686 ;;
-	    unknown) UNAME_PROCESSOR=powerpc ;;
-	esac
+	eval $set_cc_for_build
+	if test "$UNAME_PROCESSOR" = unknown ; then
+	    UNAME_PROCESSOR=powerpc
+	fi
+	if test `echo "$UNAME_RELEASE" | sed -e 's/\..*//'` -le 10 ; then
+	    if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
+		if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
+		    (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
+		    grep IS_64BIT_ARCH >/dev/null
+		then
+		    case $UNAME_PROCESSOR in
+			i386) UNAME_PROCESSOR=x86_64 ;;
+			powerpc) UNAME_PROCESSOR=powerpc64 ;;
+		    esac
+		fi
+	    fi
+	elif test "$UNAME_PROCESSOR" = i386 ; then
+	    # Avoid executing cc on OS X 10.9, as it ships with a stub
+	    # that puts up a graphical alert prompting to install
+	    # developer tools.  Any system running Mac OS X 10.7 or
+	    # later (Darwin 11 and later) is required to have a 64-bit
+	    # processor. This is not true of the ARM version of Darwin
+	    # that Apple uses in portable devices.
+	    UNAME_PROCESSOR=x86_64
+	fi
 	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
 	exit ;;
     *:procnto*:*:* | *:QNX:[0123456789]*:*)
@@ -1198,7 +1315,10 @@
     *:QNX:*:4*)
 	echo i386-pc-qnx
 	exit ;;
-    NSE-?:NONSTOP_KERNEL:*:*)
+    NEO-?:NONSTOP_KERNEL:*:*)
+	echo neo-tandem-nsk${UNAME_RELEASE}
+	exit ;;
+    NSE-*:NONSTOP_KERNEL:*:*)
 	echo nse-tandem-nsk${UNAME_RELEASE}
 	exit ;;
     NSR-?:NONSTOP_KERNEL:*:*)
@@ -1243,13 +1363,13 @@
 	echo pdp10-unknown-its
 	exit ;;
     SEI:*:*:SEIUX)
-        echo mips-sei-seiux${UNAME_RELEASE}
+	echo mips-sei-seiux${UNAME_RELEASE}
 	exit ;;
     *:DragonFly:*:*)
 	echo ${UNAME_MACHINE}-unknown-dragonfly`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
 	exit ;;
     *:*VMS:*:*)
-    	UNAME_MACHINE=`(uname -p) 2>/dev/null`
+	UNAME_MACHINE=`(uname -p) 2>/dev/null`
 	case "${UNAME_MACHINE}" in
 	    A*) echo alpha-dec-vms ; exit ;;
 	    I*) echo ia64-dec-vms ; exit ;;
@@ -1261,158 +1381,16 @@
     i*86:skyos:*:*)
 	echo ${UNAME_MACHINE}-pc-skyos`echo ${UNAME_RELEASE}` | sed -e 's/ .*$//'
 	exit ;;
-esac
-
-#echo '(No uname command or uname output not recognized.)' 1>&2
-#echo "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" 1>&2
-
-eval $set_cc_for_build
-cat >$dummy.c <<EOF
-#ifdef _SEQUENT_
-# include <sys/types.h>
-# include <sys/utsname.h>
-#endif
-main ()
-{
-#if defined (sony)
-#if defined (MIPSEB)
-  /* BFD wants "bsd" instead of "newsos".  Perhaps BFD should be changed,
-     I don't know....  */
-  printf ("mips-sony-bsd\n"); exit (0);
-#else
-#include <sys/param.h>
-  printf ("m68k-sony-newsos%s\n",
-#ifdef NEWSOS4
-          "4"
-#else
-	  ""
-#endif
-         ); exit (0);
-#endif
-#endif
-
-#if defined (__arm) && defined (__acorn) && defined (__unix)
-  printf ("arm-acorn-riscix\n"); exit (0);
-#endif
-
-#if defined (hp300) && !defined (hpux)
-  printf ("m68k-hp-bsd\n"); exit (0);
-#endif
-
-#if defined (NeXT)
-#if !defined (__ARCHITECTURE__)
-#define __ARCHITECTURE__ "m68k"
-#endif
-  int version;
-  version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null`;
-  if (version < 4)
-    printf ("%s-next-nextstep%d\n", __ARCHITECTURE__, version);
-  else
-    printf ("%s-next-openstep%d\n", __ARCHITECTURE__, version);
-  exit (0);
-#endif
-
-#if defined (MULTIMAX) || defined (n16)
-#if defined (UMAXV)
-  printf ("ns32k-encore-sysv\n"); exit (0);
-#else
-#if defined (CMU)
-  printf ("ns32k-encore-mach\n"); exit (0);
-#else
-  printf ("ns32k-encore-bsd\n"); exit (0);
-#endif
-#endif
-#endif
-
-#if defined (__386BSD__)
-  printf ("i386-pc-bsd\n"); exit (0);
-#endif
-
-#if defined (sequent)
-#if defined (i386)
-  printf ("i386-sequent-dynix\n"); exit (0);
-#endif
-#if defined (ns32000)
-  printf ("ns32k-sequent-dynix\n"); exit (0);
-#endif
-#endif
-
-#if defined (_SEQUENT_)
-    struct utsname un;
-
-    uname(&un);
-
-    if (strncmp(un.version, "V2", 2) == 0) {
-	printf ("i386-sequent-ptx2\n"); exit (0);
-    }
-    if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
-	printf ("i386-sequent-ptx1\n"); exit (0);
-    }
-    printf ("i386-sequent-ptx\n"); exit (0);
-
-#endif
-
-#if defined (vax)
-# if !defined (ultrix)
-#  include <sys/param.h>
-#  if defined (BSD)
-#   if BSD == 43
-      printf ("vax-dec-bsd4.3\n"); exit (0);
-#   else
-#    if BSD == 199006
-      printf ("vax-dec-bsd4.3reno\n"); exit (0);
-#    else
-      printf ("vax-dec-bsd\n"); exit (0);
-#    endif
-#   endif
-#  else
-    printf ("vax-dec-bsd\n"); exit (0);
-#  endif
-# else
-    printf ("vax-dec-ultrix\n"); exit (0);
-# endif
-#endif
-
-#if defined (alliant) && defined (i860)
-  printf ("i860-alliant-bsd\n"); exit (0);
-#endif
-
-  exit (1);
-}
-EOF
-
-$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && SYSTEM_NAME=`$dummy` &&
-	{ echo "$SYSTEM_NAME"; exit; }
-
-# Apollos put the system type in the environment.
-
-test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit; }
-
-# Convex versions that predate uname can use getsysinfo(1)
-
-if [ -x /usr/convex/getsysinfo ]
-then
-    case `getsysinfo -f cpu_type` in
-    c1*)
-	echo c1-convex-bsd
-	exit ;;
-    c2*)
-	if getsysinfo -f scalar_acc
-	then echo c32-convex-bsd
-	else echo c2-convex-bsd
-	fi
+    i*86:rdos:*:*)
+	echo ${UNAME_MACHINE}-pc-rdos
 	exit ;;
-    c34*)
-	echo c34-convex-bsd
-	exit ;;
-    c38*)
-	echo c38-convex-bsd
+    i*86:AROS:*:*)
+	echo ${UNAME_MACHINE}-pc-aros
 	exit ;;
-    c4*)
-	echo c4-convex-bsd
+    x86_64:VMkernel:*:*)
+	echo ${UNAME_MACHINE}-unknown-esx
 	exit ;;
-    esac
-fi
+esac
 
 cat >&2 <<EOF
 $0: unable to guess system type
@@ -1421,9 +1399,9 @@
 the operating system you are using. It is advised that you
 download the most up to date version of the config scripts from
 
-  http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.guess
+  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
 and
-  http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.sub
+  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD
 
 If the version you run ($0) is already up to date, please
 send the following data and any information you think might be
--- opensp-1.5.2.orig/config.h.in
+++ opensp-1.5.2/config.h.in
@@ -1,5 +1,8 @@
 /* config.h.in.  Generated from configure.in by autoheader.  */
 
+/* Define if building universal (internal helper macro) */
+#undef AC_APPLE_UNIVERSAL_BUILD
+
 /* Define to one of `_getb67', `GETB67', `getb67' for Cray-2 and Cray-YMP
    systems. This function is required for `alloca.c' support on those systems.
    */
@@ -245,7 +248,7 @@
 /* Define to 1 if you have the `strtoul' function. */
 #undef HAVE_STRTOUL
 
-/* Define to 1 if `st_blksize' is member of `struct stat'. */
+/* Define to 1 if `st_blksize' is a member of `struct stat'. */
 #undef HAVE_STRUCT_STAT_ST_BLKSIZE
 
 /* Define if your `struct stat' has `st_blksize'. Deprecated, use
@@ -303,6 +306,10 @@
 /* Define if integer division by zero raises signal SIGFPE. */
 #undef INTDIV0_RAISES_SIGFPE
 
+/* Define to the sub-directory in which libtool stores uninstalled libraries.
+   */
+#undef LT_OBJDIR
+
 /* Define to the address where bug reports for this package should be sent. */
 #undef PACKAGE_BUGREPORT
 
@@ -315,6 +322,9 @@
 /* Define to the one symbol short name of this package. */
 #undef PACKAGE_TARNAME
 
+/* Define to the home page for this package. */
+#undef PACKAGE_URL
+
 /* Define to the version of this package. */
 #undef PACKAGE_VERSION
 
@@ -330,19 +340,19 @@
 /* set this to the default SGML search path */
 #undef SGML_SEARCH_PATH_DEFAULT
 
-/* The size of a `bool', as computed by sizeof. */
+/* The size of `bool', as computed by sizeof. */
 #undef SIZEOF_BOOL
 
-/* The size of a `size_t', as computed by sizeof. */
+/* The size of `size_t', as computed by sizeof. */
 #undef SIZEOF_SIZE_T
 
-/* The size of a `unsigned int', as computed by sizeof. */
+/* The size of `unsigned int', as computed by sizeof. */
 #undef SIZEOF_UNSIGNED_INT
 
-/* The size of a `unsigned short', as computed by sizeof. */
+/* The size of `unsigned short', as computed by sizeof. */
 #undef SIZEOF_UNSIGNED_SHORT
 
-/* The size of a `wchar_t', as computed by sizeof. */
+/* The size of `wchar_t', as computed by sizeof. */
 #undef SIZEOF_WCHAR_T
 
 /* Define as the maximum value of type 'size_t', if the system doesn't define
@@ -426,7 +436,7 @@
 
 /* If using the C implementation of alloca, define if you know the
    direction of stack growth for your system; otherwise it will be
-   automatically deduced at run-time.
+   automatically deduced at runtime.
 	STACK_DIRECTION > 0 => grows toward higher addresses
 	STACK_DIRECTION < 0 => grows toward lower addresses
 	STACK_DIRECTION = 0 => direction of growth unknown */
@@ -435,9 +445,49 @@
 /* Define to 1 if you have the ANSI C header files. */
 #undef STDC_HEADERS
 
-/* Define to 1 if your processor stores words with the most significant byte
-   first (like Motorola and SPARC, unlike Intel and VAX). */
-#undef WORDS_BIGENDIAN
+/* Enable extensions on AIX 3, Interix.  */
+#ifndef _ALL_SOURCE
+# undef _ALL_SOURCE
+#endif
+/* Enable GNU extensions on systems that have them.  */
+#ifndef _GNU_SOURCE
+# undef _GNU_SOURCE
+#endif
+/* Enable threading extensions on Solaris.  */
+#ifndef _POSIX_PTHREAD_SEMANTICS
+# undef _POSIX_PTHREAD_SEMANTICS
+#endif
+/* Enable extensions on HP NonStop.  */
+#ifndef _TANDEM_SOURCE
+# undef _TANDEM_SOURCE
+#endif
+/* Enable general extensions on Solaris.  */
+#ifndef __EXTENSIONS__
+# undef __EXTENSIONS__
+#endif
+
+
+/* Define WORDS_BIGENDIAN to 1 if your processor stores words with the most
+   significant byte first (like Motorola and SPARC, unlike Intel). */
+#if defined AC_APPLE_UNIVERSAL_BUILD
+# if defined __BIG_ENDIAN__
+#  define WORDS_BIGENDIAN 1
+# endif
+#else
+# ifndef WORDS_BIGENDIAN
+#  undef WORDS_BIGENDIAN
+# endif
+#endif
+
+/* Define to 1 if on MINIX. */
+#undef _MINIX
+
+/* Define to 2 if the system does not provide POSIX.1 features except with
+   this defined. */
+#undef _POSIX_1_SOURCE
+
+/* Define to 1 if you need to in order for `stat' and other things to work. */
+#undef _POSIX_SOURCE
 
 /* Define to empty if `const' does not conform to ANSI C. */
 #undef const
@@ -448,7 +498,7 @@
 #undef inline
 #endif
 
-/* Define to `long' if <sys/types.h> does not define. */
+/* Define to `long int' if <sys/types.h> does not define. */
 #undef off_t
 
 /* Define as the type of the result of subtracting two pointers, if the system
@@ -461,7 +511,7 @@
 /* Define to empty if the C compiler doesn't support this keyword. */
 #undef signed
 
-/* Define to `unsigned' if <sys/types.h> does not define. */
+/* Define to `unsigned int' if <sys/types.h> does not define. */
 #undef size_t
 
 /* Define to unsigned long or unsigned long long if <stdint.h> and
--- opensp-1.5.2.orig/config.sub
+++ opensp-1.5.2/config.sub
@@ -1,43 +1,40 @@
 #! /bin/sh
 # Configuration validation subroutine script.
-#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
-#   2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
+#   Copyright 1992-2015 Free Software Foundation, Inc.
 
-timestamp='2005-07-08'
+timestamp='2015-08-20'
 
-# This file is (in principle) common to ALL GNU software.
-# The presence of a machine in this file suggests that SOME GNU software
-# can handle that machine.  It does not imply ALL GNU software can.
-#
-# This file is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
+# This file is free software; you can redistribute it and/or modify it
+# under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 3 of the License, or
 # (at your option) any later version.
 #
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
+# This program is distributed in the hope that it will be useful, but
+# WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+# General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
-# 02110-1301, USA.
+# along with this program; if not, see <http://www.gnu.org/licenses/>.
 #
 # As a special exception to the GNU General Public License, if you
 # distribute this file as part of a program that contains a
 # configuration script generated by Autoconf, you may include it under
-# the same distribution terms that you use for the rest of that program.
+# the same distribution terms that you use for the rest of that
+# program.  This Exception is an additional permission under section 7
+# of the GNU General Public License, version 3 ("GPLv3").
 
 
-# Please send patches to <config-patches@gnu.org>.  Submit a context
-# diff and a properly formatted ChangeLog entry.
+# Please send patches to <config-patches@gnu.org>.
 #
 # Configuration subroutine to validate and canonicalize a configuration type.
 # Supply the specified configuration type as an argument.
 # If it is invalid, we print an error message on stderr and exit with code 1.
 # Otherwise, we print the canonical config type on stdout and succeed.
 
+# You can get the latest version of this script from:
+# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD
+
 # This file is supposed to be the same for all GNU packages
 # and recognize all the CPU types, system types and aliases
 # that are meaningful with *any* GNU software.
@@ -71,8 +68,7 @@
 version="\
 GNU config.sub ($timestamp)
 
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
-Free Software Foundation, Inc.
+Copyright 1992-2015 Free Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
 warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
@@ -119,11 +115,18 @@
 # Here we must recognize all the valid KERNEL-OS combinations.
 maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
 case $maybe_os in
-  nto-qnx* | linux-gnu* | linux-dietlibc | linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | \
-  kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* | storm-chaos* | os2-emx* | rtmk-nova*)
+  nto-qnx* | linux-gnu* | linux-android* | linux-dietlibc | linux-newlib* | \
+  linux-musl* | linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | \
+  knetbsd*-gnu* | netbsd*-gnu* | netbsd*-eabi* | \
+  kopensolaris*-gnu* | \
+  storm-chaos* | os2-emx* | rtmk-nova*)
     os=-$maybe_os
     basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
     ;;
+  android-linux)
+    os=-linux-android
+    basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`-unknown
+    ;;
   *)
     basic_machine=`echo $1 | sed 's/-[^-]*$//'`
     if [ $basic_machine != $1 ]
@@ -146,10 +149,13 @@
 	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
 	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
 	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
-	-apple | -axis | -knuth | -cray)
+	-apple | -axis | -knuth | -cray | -microblaze*)
 		os=
 		basic_machine=$1
 		;;
+	-bluegene*)
+		os=-cnk
+		;;
 	-sim | -cisco | -oki | -wec | -winbond)
 		os=
 		basic_machine=$1
@@ -164,13 +170,17 @@
 		os=-chorusos
 		basic_machine=$1
 		;;
- 	-chorusrdb)
- 		os=-chorusrdb
+	-chorusrdb)
+		os=-chorusrdb
 		basic_machine=$1
- 		;;
+		;;
 	-hiux*)
 		os=-hiuxwe2
 		;;
+	-sco6)
+		os=-sco5v6
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
 	-sco5)
 		os=-sco3.2v5
 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
@@ -187,6 +197,10 @@
 		# Don't forget version if it is 3.2v4 or newer.
 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
 		;;
+	-sco5v6*)
+		# Don't forget version if it is 3.2v4 or newer.
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
 	-sco*)
 		os=-sco3.2v2
 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
@@ -204,6 +218,12 @@
 	-isc*)
 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
 		;;
+	-lynx*178)
+		os=-lynxos178
+		;;
+	-lynx*5)
+		os=-lynxos5
+		;;
 	-lynx*)
 		os=-lynxos
 		;;
@@ -228,64 +248,114 @@
 	# Some are omitted here because they have special meanings below.
 	1750a | 580 \
 	| a29k \
+	| aarch64 | aarch64_be \
 	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
 	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
 	| am33_2.0 \
-	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
+	| arc | arceb \
+	| arm | arm[bl]e | arme[lb] | armv[2-8] | armv[3-8][lb] | armv7[arm] \
+	| avr | avr32 \
+	| ba \
+	| be32 | be64 \
 	| bfin \
-	| c4x | clipper \
+	| c4x | c8051 | clipper \
 	| d10v | d30v | dlx | dsp16xx \
-	| fr30 | frv \
+	| e2k | epiphany \
+	| fido | fr30 | frv | ft32 \
 	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
+	| hexagon \
 	| i370 | i860 | i960 | ia64 \
 	| ip2k | iq2000 \
-	| m32r | m32rle | m68000 | m68k | m88k | maxq | mcore \
+	| k1om \
+	| le32 | le64 \
+	| lm32 \
+	| m32c | m32r | m32rle | m68000 | m68k | m88k \
+	| maxq | mb | microblaze | microblazeel | mcore | mep | metag \
 	| mips | mipsbe | mipseb | mipsel | mipsle \
 	| mips16 \
 	| mips64 | mips64el \
-	| mips64vr | mips64vrel \
+	| mips64octeon | mips64octeonel \
 	| mips64orion | mips64orionel \
+	| mips64r5900 | mips64r5900el \
+	| mips64vr | mips64vrel \
 	| mips64vr4100 | mips64vr4100el \
 	| mips64vr4300 | mips64vr4300el \
 	| mips64vr5000 | mips64vr5000el \
 	| mips64vr5900 | mips64vr5900el \
 	| mipsisa32 | mipsisa32el \
 	| mipsisa32r2 | mipsisa32r2el \
+	| mipsisa32r6 | mipsisa32r6el \
 	| mipsisa64 | mipsisa64el \
 	| mipsisa64r2 | mipsisa64r2el \
+	| mipsisa64r6 | mipsisa64r6el \
 	| mipsisa64sb1 | mipsisa64sb1el \
 	| mipsisa64sr71k | mipsisa64sr71kel \
+	| mipsr5900 | mipsr5900el \
 	| mipstx39 | mipstx39el \
 	| mn10200 | mn10300 \
-	| ms1 \
+	| moxie \
+	| mt \
 	| msp430 \
+	| nds32 | nds32le | nds32be \
+	| nios | nios2 | nios2eb | nios2el \
 	| ns16k | ns32k \
-	| or32 \
+	| open8 | or1k | or1knd | or32 \
 	| pdp10 | pdp11 | pj | pjl \
-	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
+	| powerpc | powerpc64 | powerpc64le | powerpcle \
 	| pyramid \
-	| sh | sh[1234] | sh[24]a | sh[23]e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
+	| riscv32 | riscv64 \
+	| rl78 | rx \
+	| score \
+	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[234]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
 	| sh64 | sh64le \
-	| sparc | sparc64 | sparc64b | sparc86x | sparclet | sparclite \
-	| sparcv8 | sparcv9 | sparcv9b \
-	| strongarm \
-	| tahoe | thumb | tic4x | tic80 | tron \
-	| v850 | v850e \
+	| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet | sparclite \
+	| sparcv8 | sparcv9 | sparcv9b | sparcv9v \
+	| spu \
+	| tahoe | tic4x | tic54x | tic55x | tic6x | tic80 | tron \
+	| ubicom32 \
+	| v850 | v850e | v850e1 | v850e2 | v850es | v850e2v3 \
+	| visium \
 	| we32k \
-	| x86 | xscale | xscalee[bl] | xstormy16 | xtensa \
-	| z8k)
+	| x86 | xc16x | xstormy16 | xtensa \
+	| z8k | z80)
 		basic_machine=$basic_machine-unknown
 		;;
-	m32c)
-		basic_machine=$basic_machine-unknown
+	c54x)
+		basic_machine=tic54x-unknown
+		;;
+	c55x)
+		basic_machine=tic55x-unknown
+		;;
+	c6x)
+		basic_machine=tic6x-unknown
+		;;
+	leon|leon[3-9])
+		basic_machine=sparc-$basic_machine
 		;;
-	m6811 | m68hc11 | m6812 | m68hc12)
-		# Motorola 68HC11/12.
+	m6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x | nvptx | picochip)
 		basic_machine=$basic_machine-unknown
 		os=-none
 		;;
 	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
 		;;
+	ms1)
+		basic_machine=mt-unknown
+		;;
+
+	strongarm | thumb | xscale)
+		basic_machine=arm-unknown
+		;;
+	xgate)
+		basic_machine=$basic_machine-unknown
+		os=-none
+		;;
+	xscaleeb)
+		basic_machine=armeb-unknown
+		;;
+
+	xscaleel)
+		basic_machine=armel-unknown
+		;;
 
 	# We use `pc' rather than `unknown'
 	# because (1) that's what they normally are, and
@@ -301,65 +371,89 @@
 	# Recognize the basic CPU types with company name.
 	580-* \
 	| a29k-* \
+	| aarch64-* | aarch64_be-* \
 	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
 	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
-	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
+	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* | arceb-* \
 	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
-	| avr-* \
+	| avr-* | avr32-* \
+	| ba-* \
+	| be32-* | be64-* \
 	| bfin-* | bs2000-* \
-	| c[123]* | c30-* | [cjt]90-* | c4x-* | c54x-* | c55x-* | c6x-* \
-	| clipper-* | craynv-* | cydra-* \
+	| c[123]* | c30-* | [cjt]90-* | c4x-* \
+	| c8051-* | clipper-* | craynv-* | cydra-* \
 	| d10v-* | d30v-* | dlx-* \
-	| elxsi-* \
-	| f30[01]-* | f700-* | fr30-* | frv-* | fx80-* \
+	| e2k-* | elxsi-* \
+	| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \
 	| h8300-* | h8500-* \
 	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
+	| hexagon-* \
 	| i*86-* | i860-* | i960-* | ia64-* \
 	| ip2k-* | iq2000-* \
-	| m32r-* | m32rle-* \
+	| k1om-* \
+	| le32-* | le64-* \
+	| lm32-* \
+	| m32c-* | m32r-* | m32rle-* \
 	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
-	| m88110-* | m88k-* | maxq-* | mcore-* \
+	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* \
+	| microblaze-* | microblazeel-* \
 	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
 	| mips16-* \
 	| mips64-* | mips64el-* \
-	| mips64vr-* | mips64vrel-* \
+	| mips64octeon-* | mips64octeonel-* \
 	| mips64orion-* | mips64orionel-* \
+	| mips64r5900-* | mips64r5900el-* \
+	| mips64vr-* | mips64vrel-* \
 	| mips64vr4100-* | mips64vr4100el-* \
 	| mips64vr4300-* | mips64vr4300el-* \
 	| mips64vr5000-* | mips64vr5000el-* \
 	| mips64vr5900-* | mips64vr5900el-* \
 	| mipsisa32-* | mipsisa32el-* \
 	| mipsisa32r2-* | mipsisa32r2el-* \
+	| mipsisa32r6-* | mipsisa32r6el-* \
 	| mipsisa64-* | mipsisa64el-* \
 	| mipsisa64r2-* | mipsisa64r2el-* \
+	| mipsisa64r6-* | mipsisa64r6el-* \
 	| mipsisa64sb1-* | mipsisa64sb1el-* \
 	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
+	| mipsr5900-* | mipsr5900el-* \
 	| mipstx39-* | mipstx39el-* \
 	| mmix-* \
-	| ms1-* \
+	| mt-* \
 	| msp430-* \
+	| nds32-* | nds32le-* | nds32be-* \
+	| nios-* | nios2-* | nios2eb-* | nios2el-* \
 	| none-* | np1-* | ns16k-* | ns32k-* \
+	| open8-* \
+	| or1k*-* \
 	| orion-* \
 	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
-	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
+	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* \
 	| pyramid-* \
-	| romp-* | rs6000-* \
-	| sh-* | sh[1234]-* | sh[24]a-* | sh[23]e-* | sh[34]eb-* | shbe-* \
+	| riscv32-* | riscv64-* \
+	| rl78-* | romp-* | rs6000-* | rx-* \
+	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
 	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
-	| sparc-* | sparc64-* | sparc64b-* | sparc86x-* | sparclet-* \
+	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
 	| sparclite-* \
-	| sparcv8-* | sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
-	| tahoe-* | thumb-* \
+	| sparcv8-* | sparcv9-* | sparcv9b-* | sparcv9v-* | sv1-* | sx*-* \
+	| tahoe-* \
 	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
+	| tile*-* \
 	| tron-* \
-	| v850-* | v850e-* | vax-* \
+	| ubicom32-* \
+	| v850-* | v850e-* | v850e1-* | v850es-* | v850e2-* | v850e2v3-* \
+	| vax-* \
+	| visium-* \
 	| we32k-* \
-	| x86-* | x86_64-* | xps100-* | xscale-* | xscalee[bl]-* \
-	| xstormy16-* | xtensa-* \
+	| x86-* | x86_64-* | xc16x-* | xps100-* \
+	| xstormy16-* | xtensa*-* \
 	| ymp-* \
-	| z8k-*)
+	| z8k-* | z80-*)
 		;;
-	m32c-*)
+	# Recognize the basic CPU types without company name, with glob match.
+	xtensa*)
+		basic_machine=$basic_machine-unknown
 		;;
 	# Recognize the various machine names and aliases which stand
 	# for a CPU type and a company and sometimes even an OS.
@@ -377,7 +471,7 @@
 		basic_machine=a29k-amd
 		os=-udi
 		;;
-    	abacus)
+	abacus)
 		basic_machine=abacus-unknown
 		;;
 	adobe68k)
@@ -423,6 +517,13 @@
 		basic_machine=m68k-apollo
 		os=-bsd
 		;;
+	aros)
+		basic_machine=i386-pc
+		os=-aros
+		;;
+        asmjs)
+		basic_machine=asmjs-unknown
+		;;
 	aux)
 		basic_machine=m68k-apple
 		os=-aux
@@ -431,10 +532,35 @@
 		basic_machine=ns32k-sequent
 		os=-dynix
 		;;
+	blackfin)
+		basic_machine=bfin-unknown
+		os=-linux
+		;;
+	blackfin-*)
+		basic_machine=bfin-`echo $basic_machine | sed 's/^[^-]*-//'`
+		os=-linux
+		;;
+	bluegene*)
+		basic_machine=powerpc-ibm
+		os=-cnk
+		;;
+	c54x-*)
+		basic_machine=tic54x-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	c55x-*)
+		basic_machine=tic55x-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	c6x-*)
+		basic_machine=tic6x-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
 	c90)
 		basic_machine=c90-cray
 		os=-unicos
 		;;
+	cegcc)
+		basic_machine=arm-unknown
+		os=-cegcc
+		;;
 	convex-c1)
 		basic_machine=c1-convex
 		os=-bsd
@@ -463,8 +589,8 @@
 		basic_machine=craynv-cray
 		os=-unicosmp
 		;;
-	cr16c)
-		basic_machine=cr16c-unknown
+	cr16 | cr16-*)
+		basic_machine=cr16-unknown
 		os=-elf
 		;;
 	crds | unos)
@@ -502,6 +628,10 @@
 		basic_machine=m88k-motorola
 		os=-sysv3
 		;;
+	dicos)
+		basic_machine=i686-pc
+		os=-dicos
+		;;
 	djgpp)
 		basic_machine=i586-pc
 		os=-msdosdjgpp
@@ -617,7 +747,6 @@
 	i370-ibm* | ibm*)
 		basic_machine=i370-ibm
 		;;
-# I'm not sure what "Sysv32" means.  Should this be sysv3.2?
 	i*86v32)
 		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
 		os=-sysv32
@@ -656,6 +785,17 @@
 		basic_machine=m68k-isi
 		os=-sysv
 		;;
+	leon-*|leon[3-9]-*)
+		basic_machine=sparc-`echo $basic_machine | sed 's/-.*//'`
+		;;
+	m68knommu)
+		basic_machine=m68k-unknown
+		os=-linux
+		;;
+	m68knommu-*)
+		basic_machine=m68k-`echo $basic_machine | sed 's/^[^-]*-//'`
+		os=-linux
+		;;
 	m88k-omron*)
 		basic_machine=m88k-omron
 		;;
@@ -667,10 +807,21 @@
 		basic_machine=ns32k-utek
 		os=-sysv
 		;;
+	microblaze*)
+		basic_machine=microblaze-xilinx
+		;;
+	mingw64)
+		basic_machine=x86_64-pc
+		os=-mingw64
+		;;
 	mingw32)
-		basic_machine=i386-pc
+		basic_machine=i686-pc
 		os=-mingw32
 		;;
+	mingw32ce)
+		basic_machine=arm-unknown
+		os=-mingw32ce
+		;;
 	miniframe)
 		basic_machine=m68000-convergent
 		;;
@@ -692,14 +843,29 @@
 		basic_machine=powerpc-unknown
 		os=-morphos
 		;;
+	moxiebox)
+		basic_machine=moxie-unknown
+		os=-moxiebox
+		;;
 	msdos)
 		basic_machine=i386-pc
 		os=-msdos
 		;;
+	ms1-*)
+		basic_machine=`echo $basic_machine | sed -e 's/ms1-/mt-/'`
+		;;
+	msys)
+		basic_machine=i686-pc
+		os=-msys
+		;;
 	mvs)
 		basic_machine=i370-ibm
 		os=-mvs
 		;;
+	nacl)
+		basic_machine=le32-unknown
+		os=-nacl
+		;;
 	ncr3000)
 		basic_machine=i486-ncr
 		os=-sysv4
@@ -764,6 +930,12 @@
 	np1)
 		basic_machine=np1-gould
 		;;
+	neo-tandem)
+		basic_machine=neo-tandem
+		;;
+	nse-tandem)
+		basic_machine=nse-tandem
+		;;
 	nsr-tandem)
 		basic_machine=nsr-tandem
 		;;
@@ -794,6 +966,14 @@
 		basic_machine=i860-intel
 		os=-osf
 		;;
+	parisc)
+		basic_machine=hppa-unknown
+		os=-linux
+		;;
+	parisc-*)
+		basic_machine=hppa-`echo $basic_machine | sed 's/^[^-]*-//'`
+		os=-linux
+		;;
 	pbd)
 		basic_machine=sparc-tti
 		;;
@@ -803,6 +983,12 @@
 	pc532 | pc532-*)
 		basic_machine=ns32k-pc532
 		;;
+	pc98)
+		basic_machine=i386-pc
+		;;
+	pc98-*)
+		basic_machine=i386-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
 	pentium | p5 | k5 | k6 | nexgen | viac3)
 		basic_machine=i586-pc
 		;;
@@ -832,9 +1018,10 @@
 		;;
 	power)	basic_machine=power-ibm
 		;;
-	ppc)	basic_machine=powerpc-unknown
+	ppc | ppcbe)	basic_machine=powerpc-unknown
 		;;
-	ppc-*)	basic_machine=powerpc-`echo $basic_machine | sed 's/^[^-]*-//'`
+	ppc-* | ppcbe-*)
+		basic_machine=powerpc-`echo $basic_machine | sed 's/^[^-]*-//'`
 		;;
 	ppcle | powerpclittle | ppc-le | powerpc-little)
 		basic_machine=powerpcle-unknown
@@ -859,6 +1046,14 @@
 		basic_machine=i586-unknown
 		os=-pw32
 		;;
+	rdos | rdos64)
+		basic_machine=x86_64-pc
+		os=-rdos
+		;;
+	rdos32)
+		basic_machine=i386-pc
+		os=-rdos
+		;;
 	rom68k)
 		basic_machine=m68k-rom68k
 		os=-coff
@@ -885,6 +1080,10 @@
 	sb1el)
 		basic_machine=mipsisa64sb1el-unknown
 		;;
+	sde)
+		basic_machine=mipsisa32-sde
+		os=-elf
+		;;
 	sei)
 		basic_machine=mips-sei
 		os=-seiux
@@ -896,6 +1095,9 @@
 		basic_machine=sh-hitachi
 		os=-hms
 		;;
+	sh5el)
+		basic_machine=sh5le-unknown
+		;;
 	sh64)
 		basic_machine=sh64-unknown
 		;;
@@ -917,6 +1119,9 @@
 		basic_machine=i860-stratus
 		os=-sysv4
 		;;
+	strongarm-* | thumb-*)
+		basic_machine=arm-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
 	sun2)
 		basic_machine=m68000-sun
 		;;
@@ -973,17 +1178,9 @@
 		basic_machine=t90-cray
 		os=-unicos
 		;;
-	tic54x | c54x*)
-		basic_machine=tic54x-unknown
-		os=-coff
-		;;
-	tic55x | c55x*)
-		basic_machine=tic55x-unknown
-		os=-coff
-		;;
-	tic6x | c6x*)
-		basic_machine=tic6x-unknown
-		os=-coff
+	tile*)
+		basic_machine=$basic_machine-unknown
+		os=-linux-gnu
 		;;
 	tx39)
 		basic_machine=mipstx39-unknown
@@ -1052,6 +1249,9 @@
 	xps | xps100)
 		basic_machine=xps100-honeywell
 		;;
+	xscale-* | xscalee[bl]-*)
+		basic_machine=`echo $basic_machine | sed 's/^xscale/arm/'`
+		;;
 	ymp)
 		basic_machine=ymp-cray
 		os=-unicos
@@ -1060,6 +1260,10 @@
 		basic_machine=z8k-unknown
 		os=-sim
 		;;
+	z80-*-coff)
+		basic_machine=z80-unknown
+		os=-sim
+		;;
 	none)
 		basic_machine=none-none
 		os=-none
@@ -1098,10 +1302,10 @@
 	we32k)
 		basic_machine=we32k-att
 		;;
-	sh[1234] | sh[24]a | sh[34]eb | sh[1234]le | sh[23]ele)
+	sh[1234] | sh[24]a | sh[24]aeb | sh[34]eb | sh[1234]le | sh[23]ele)
 		basic_machine=sh-unknown
 		;;
-	sparc | sparcv8 | sparcv9 | sparcv9b)
+	sparc | sparcv8 | sparcv9 | sparcv9b | sparcv9v)
 		basic_machine=sparc-sun
 		;;
 	cydra)
@@ -1145,9 +1349,12 @@
 if [ x"$os" != x"" ]
 then
 case $os in
-        # First match some system type aliases
-        # that might get confused with valid system types.
+	# First match some system type aliases
+	# that might get confused with valid system types.
 	# -solaris* is a basic system type, with this one exception.
+	-auroraux)
+		os=-auroraux
+		;;
 	-solaris1 | -solaris1.*)
 		os=`echo $os | sed -e 's|solaris1|sunos4|'`
 		;;
@@ -1168,27 +1375,31 @@
 	# Each alternative MUST END IN A *, to match a version number.
 	# -sysv* is not here because it comes later, after sysvr4.
 	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
-	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -sunos | -sunos[34]*\
-	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
+	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
+	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
+	      | -sym* | -kopensolaris* | -plan9* \
 	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
-	      | -aos* \
+	      | -aos* | -aros* | -cloudabi* | -sortix* \
 	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
 	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
-	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* | -openbsd* \
+	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
+	      | -bitrig* | -openbsd* | -solidbsd* \
 	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
 	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
 	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
 	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
-	      | -chorusos* | -chorusrdb* \
-	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
-	      | -mingw32* | -linux-gnu* | -linux-uclibc* | -uxpv* | -beos* | -mpeix* | -udk* \
+	      | -chorusos* | -chorusrdb* | -cegcc* \
+	      | -cygwin* | -msys* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
+	      | -mingw32* | -mingw64* | -linux-gnu* | -linux-android* \
+	      | -linux-newlib* | -linux-musl* | -linux-uclibc* \
+	      | -uxpv* | -beos* | -mpeix* | -udk* | -moxiebox* \
 	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
 	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
 	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
 	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
 	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
 	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
-	      | -skyos* | -haiku*)
+	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es* | -tirtos*)
 	# Remember, each alternative MUST END IN *, to match a version number.
 		;;
 	-qnx*)
@@ -1227,7 +1438,7 @@
 	-opened*)
 		os=-openedition
 		;;
-        -os400*)
+	-os400*)
 		os=-os400
 		;;
 	-wince*)
@@ -1276,7 +1487,7 @@
 	-sinix*)
 		os=-sysv4
 		;;
-        -tpf*)
+	-tpf*)
 		os=-tpf
 		;;
 	-triton*)
@@ -1312,12 +1523,14 @@
 	-aros*)
 		os=-aros
 		;;
-	-kaos*)
-		os=-kaos
-		;;
 	-zvmoe)
 		os=-zvmoe
 		;;
+	-dicos*)
+		os=-dicos
+		;;
+	-nacl*)
+		;;
 	-none)
 		;;
 	*)
@@ -1340,6 +1553,12 @@
 # system, and we'll never get to this point.
 
 case $basic_machine in
+	score-*)
+		os=-elf
+		;;
+	spu-*)
+		os=-elf
+		;;
 	*-acorn)
 		os=-riscix1.2
 		;;
@@ -1349,9 +1568,24 @@
 	arm*-semi)
 		os=-aout
 		;;
-    c4x-* | tic4x-*)
-        os=-coff
-        ;;
+	c4x-* | tic4x-*)
+		os=-coff
+		;;
+	c8051-*)
+		os=-elf
+		;;
+	hexagon-*)
+		os=-elf
+		;;
+	tic54x-*)
+		os=-coff
+		;;
+	tic55x-*)
+		os=-coff
+		;;
+	tic6x-*)
+		os=-coff
+		;;
 	# This must come before the *-dec entry.
 	pdp10-*)
 		os=-tops20
@@ -1370,13 +1604,13 @@
 		;;
 	m68000-sun)
 		os=-sunos3
-		# This also exists in the configure program, but was not the
-		# default.
-		# os=-sunos4
 		;;
 	m68*-cisco)
 		os=-aout
 		;;
+	mep-*)
+		os=-elf
+		;;
 	mips*-cisco)
 		os=-elf
 		;;
@@ -1401,7 +1635,7 @@
 	*-ibm)
 		os=-aix
 		;;
-    	*-knuth)
+	*-knuth)
 		os=-mmixware
 		;;
 	*-wec)
@@ -1506,7 +1740,7 @@
 			-sunos*)
 				vendor=sun
 				;;
-			-aix*)
+			-cnk*|-aix*)
 				vendor=ibm
 				;;
 			-beos*)
--- opensp-1.5.2.orig/configure.in
+++ opensp-1.5.2/configure.in
@@ -13,11 +13,13 @@
 dnl Initialization.
 AC_INIT
 AC_CONFIG_SRCDIR([pubtext])
+AC_CONFIG_MACRO_DIR([m4])
 AM_INIT_AUTOMAKE(OpenSP, 1.5.2, no-define)
 AM_MAINTAINER_MODE
 AC_PREREQ(2.53)
 AM_CONFIG_HEADER(config.h)
 AM_SANITY_CHECK
+AC_USE_SYSTEM_EXTENSIONS
 
 dnl Autoheader definitions
 
@@ -241,7 +243,7 @@
 AM_GNU_GETTEXT
 AM_GNU_GETTEXT_VERSION([0.14.5])
 AC_CHECK_HEADERS(locale.h)
-AC_DEFINE_DIR(SP_LOCALE_DIR, datadir/locale, [location of message catalogs])
+AX_DEFINE_DIR(SP_LOCALE_DIR, localedir, [location of message catalogs])
 SP_MESSAGE_DOMAIN="sp$SP_LIBOSP_CUR"
 AC_DEFINE_UNQUOTED(SP_MESSAGE_DOMAIN, "$SP_MESSAGE_DOMAIN", [message domain])
 AC_SUBST(SP_MESSAGE_DOMAIN)
@@ -533,10 +535,10 @@
 
 if test "$BUILDFULLDOCS" = "yes"
 then
-    AC_PATH_PROG(PDF2PS, pdf2ps)
+    AC_PATH_PROGS(PDF2PS, pdftops pdf2ps)
     if test -z "$PDF2PS"
     then AC_MSG_ERROR(
-[could not find pdf2ps; set PDF2PS or consider --disable-doc-build])
+[could not find pdftops or pdf2ps; set PDF2PS or consider --disable-doc-build])
     fi
     AC_PATH_PROG(JADE, openjade jade)
     if test -z "$JADE"
--- opensp-1.5.2.orig/debian/README.Debian.in
+++ opensp-1.5.2/debian/README.Debian.in
@@ -0,0 +1,32 @@
+opensp for Debian
+------------------
+
+This document covers the Debian version of the OpenSP suite.
+
+Note that the default search paths compiled into this system are
+equivalent to setting the following environment variables as shown:
+
+ SGML_CATALOG_FILES="%{default-catalogs}"
+ SGML_SEARCH_PATH="%{default-sgml-path}"
+
+You can override this by setting these variables yourself, i.e., in
+~/.profile or /etc/environment.
+
+For information on using these packages, see the included HTML
+documentation.  It also includes links to other sites, for more
+information about SGML or DSSSL.  Also see:
+
+  <URL:http://www.jclark.com/jade/>        Jade home page (OpenJade's parent)
+  <URL:http://www.oasis-open.org/cover/>   Robin Cover's SGML/XML/DSSSL pages
+  <URL:http://www.mulberrytech.com/dsssl/> Mulberry DSSSL docs and cookbook
+  <URL:http://trisome.com/auto_faq/jade-Dsssl/>
+                                           An auto-FAQ for Jade and DSSSL
+  <URL:http://www.w3.org/>                 W3O, a standards body
+                                           Discussion of the HTML backend
+
+
+See the task-sgml and task-sgml-dev packages for other useful Debian 
+SGML packages.
+
+.....Adam Di Carlo....adam@onShore.com.....<URL:http://www.onShore.com/>
+
--- opensp-1.5.2.orig/debian/changelog
+++ opensp-1.5.2/debian/changelog
@@ -0,0 +1,422 @@
+opensp (1.5.2-13) unstable; urgency=medium
+
+  * Revert NMU accidentally removed in last version.
+
+ -- Neil Roeth <neil@debian.org>  Thu, 29 Oct 2015 21:17:43 -0400
+
+opensp (1.5.2-12) unstable; urgency=medium
+
+  * Removed build dependency on openjade1.3.
+
+ -- Neil Roeth <neil@debian.org>  Thu, 29 Oct 2015 19:30:36 -0400
+
+opensp (1.5.2-11.1) unstable; urgency=low
+
+  * Non-maintainer upload.
+  * Use dh-autoreconf to allow building on ppc64el. Closes: #747127, #759104
+
+ -- Andreas Barth <aba@ayous.org>  Sun, 24 Aug 2014 14:47:33 +0000
+
+opensp (1.5.2-11) unstable; urgency=medium
+
+  * Apply patch to enable bootstrap building. (Closes: #738449).
+  * Fixed some lintian warnings - removed brace expansion in *.install
+    files, switched to dpkg-buildflags to eliminate hardening warnings.
+
+ -- Neil Roeth <neil@debian.org>  Thu, 06 Mar 2014 19:50:29 -0500
+
+opensp (1.5.2-10) unstable; urgency=low
+
+  * Change order of build dependency on openjade/openjade1.3 to work
+    around build issue. (Closes: #643845).
+  * Stop including libosp.la in the libosp-dev package. (Closes: #628588).
+
+ -- Neil Roeth <neil@debian.org>  Sat, 08 Oct 2011 18:03:06 -0400
+
+opensp (1.5.2-9) unstable; urgency=low
+
+  * Fixed bug reading locale files (closes: #611710).  Required changes to
+    autotools scripts:
+  - Use AX_DEFINE_DIR instead of AC_DEFINE_DIR.
+  - Define SP_LOCALE_DIR as value of "localedir" rather than "datadir/locale".
+  * Other autotools changes indirectly required by the above:
+  - Added --warnings=no-portability to automake call.
+  - Added AC_USE_SYSTEM_EXTENSIONS.
+  * Updated standards version to 3.9.2.0 (no changes, but filed bug 628588
+    for policy recommendation regarding .la files).
+
+ -- Neil Roeth <neil@debian.org>  Mon, 30 May 2011 11:48:25 -0400
+
+opensp (1.5.2-8) unstable; urgency=low
+
+  * Switch from deprecated xpdf-utils to poppler-utils in build
+    depends. (Closes: #549394).
+  * Updated standards version to 3.8.3.0 (no changes).
+
+ -- Neil Roeth <neil@debian.org>  Sun, 04 Oct 2009 17:59:27 -0400
+
+opensp (1.5.2-7) unstable; urgency=low
+
+  * Build with updated version of g++; removed use of g++ 4.1 on arm since
+    it appears to work with later compiler now. (Closes: #533805).
+  * Fix man page by removing gap. (Closes: #530962).
+  * Updated standards version (no changes).
+  * Updated to debhelper compat level 7.
+
+ -- Neil Roeth <neil@debian.org>  Wed, 01 Jul 2009 22:02:19 -0400
+
+opensp (1.5.2-6) unstable; urgency=low
+
+  * Compile with g++ 4.1 on arm. (Closes: #479273).
+
+ -- Neil Roeth <neil@debian.org>  Tue, 08 Jul 2008 21:39:08 -0400
+
+opensp (1.5.2-5) unstable; urgency=low
+
+  * Use pdftops instead of pdf2ps in the hope that it works on hppa and
+    sparc. pdf2ps has lots of bugs filed for problems on that
+    architecture. Correspondingly depend on xpdf-utils instead of
+    gs-common.
+
+ -- Neil Roeth <neil@debian.org>  Fri, 18 Apr 2008 23:26:11 -0400
+
+opensp (1.5.2-4) unstable; urgency=low
+
+  * Verified OpenSP builds with gcc 4.3.
+  * Added comment to README.Debian about needing to explicitly specify
+    declaration in some cases due to dropping DTDDECL support.  (Closes:
+    #345478, #350797).
+
+ -- Neil Roeth <neil@debian.org>  Tue, 15 Apr 2008 21:55:06 -0400
+
+opensp (1.5.2-3) unstable; urgency=low
+
+  * Fixed "FTBFS on hurd-i386: Unconditional use of system limit macros"
+    reported by and patch supplied by Michael Banck. Thanks,
+    Michael. (closes: #344722)
+  * Fixed "osx man page refers to nonexistent onsgmlnorm".  Thanks, Peter
+    Eisentraut. (closes: #353078)
+
+ -- Neil Roeth <neil@debian.org>  Tue, 20 Jun 2006 03:02:32 -0400
+
+opensp (1.5.2-2) unstable; urgency=low
+
+  * debian/rules: autoinit.sh is in top level dir, not debian dir.
+  * Fix bug "segfaults in OpenSP::ParsedSystemId::unparse" submitted by
+    Filipus Klutiero with patch submitted by Samuel Bronson, thanks to
+    both. (closes: #361894)
+  * Fixed bug "wrong dependencies" by removing dependencies of libosp-dev
+    on packages that are part of build-essential: libc6-dev (directly) and
+    libstdc++-dev (indirectly, but explicitly mentioned as unnecessary);
+    thanks to Matthias Klose. (closes: #352944)
+
+ -- Neil Roeth <neil@debian.org>  Sun, 18 Jun 2006 13:53:10 -0400
+
+opensp (1.5.2-1) unstable; urgency=low
+
+  * New upstream release
+  * Use new --disable-dtddecl option to turn off DTDDECL support and get
+    decent performance - finally! (closes: #138924, #208042)
+  * New release now automatically builds docs.  Updated Build-Depends to
+    suit.
+  * New package name for library (libosp5) because of soname change.
+  * Upstream man pages were modified to fix "onsgmls.1.gz etc.: NAME
+    section too long" (closes: #341644)
+  * The bug "opensp: strange error when parsing an HTML file with onsgmls
+    using stdin" was present through the last release, and there does not
+    appear to be any explicit bug fix upstream that fixed this, but
+    testing shows it is fixed in this release. (closes: #170795)
+
+ -- Neil Roeth <neil@debian.org>  Sun, 18 Dec 2005 11:22:16 -0500
+
+opensp (1.5.1.0-4) unstable; urgency=low
+
+  * Fix French translation, thanks to Yann Dirson. (closes: #240996)
+  * Fix German translation, thanks to Jens Seidel (closes: #313938)
+
+ -- Neil Roeth <neil@debian.org>  Mon, 22 Aug 2005 22:54:28 -0400
+
+opensp (1.5.1.0-3) unstable; urgency=low
+
+  * Added autoinit.sh from SourceForge web site, missing from package.
+  * Acknowledge NMU. (closes: #260797, #311967)
+  * Removed /usr/local/lib/sgml (removed /usr/lib/sgml in -2).
+  * rules: Added dh_buildinfo.
+
+ -- Neil Roeth <neil@debian.org>  Mon, 18 Jul 2005 22:42:05 -0400
+
+opensp (1.5.1.0-2.1) unstable; urgency=low
+
+  * NMU for C++ transition.
+    - Changed libosp4 into libosp4c2
+    - Make libosp4c2 conflicts with libosp4
+    - Make libosp4c2 replaces libosp4
+  * Fixed build with gcc-4.0. Thanks to Andreas Jochen for the patch (closes:
+    bug#260797).
+  * Updated libtool to make sure the library depends on libstdc++. That also
+    fixes the build on GNU/kFreeBSD (closes: bug#311967).
+
+ -- Aurelien Jarno <aurel32@debian.org>  Fri, 15 Jul 2005 18:24:48 +0200
+
+opensp (1.5.1.0-2) unstable; urgency=low
+
+  * Added /usr/share/sgml to default sgml search path. (closes: #231594)
+  * Removed /usr/lib/sgml from default sgml search path; it is
+    deprecated. The old sp program has not had this path for a while, with
+    no bugs reported, so I concluded this is safe to do.
+  * Changed list of default catalogs, all of the form */catalog, to single
+    entry, "/etc/sgml/catalog".  Any system catalog not found this way is
+    broken.
+  * /usr/share/doc/opensp/sysid.htm has an explanation that makes clear
+    why the above changes are valid.
+
+ -- Neil Roeth <neil@debian.org>  Sun, 14 Mar 2004 14:44:09 -0500
+
+opensp (1.5.1.0-1) unstable; urgency=low
+
+  * New upstream release (no change from pre1)
+  * Fix FTBFS due to documentation building tools which are not needed for
+    normal package builds (docs ship with package).
+
+ -- Neil Roeth <neil@debian.org>  Wed, 22 Oct 2003 16:05:01 -0400
+
+opensp (1.5.1pre1-1) unstable; urgency=low
+
+  * New upstream release (almost):
+  - Fixes "opensp: Segmentation fault with osx" from Philippe Batailler
+    (closes: #198641)
+  - New ABI, so replaced libosp3c102 with new library package
+    libosp4. Upstream incorporated my changes to configure.in and gettext
+    so that libosp4 can coexist with older versions of libosp, if
+    necessary (see 1.5release-4 changelog).
+  - Added build dependency on openjade | openjade1.3, jadetex,
+    xmlto and docbook-xsl for documentation building.
+  - Change of libosp3c102 to libosp4 neatly sidesteps the problems that
+    arose in dist-upgrading from libosp2 or libosp3 to libosp3c102. With
+    this release, dist-upgrading from any of libosp2 (stable), libosp3
+    (old testing), and libosp3c102 (recent testing) to libosp4 (unstable)
+    all work properly. (closes: #204219)
+  * Cleaned up debian/rules by replacing many commands with debhelper
+    equivalents.
+  * Upgraded to Standards-Version 3.6.1: no changes.
+
+ -- Neil Roeth <neil@debian.org>  Mon, 15 Sep 2003 14:51:19 -0400
+
+opensp (1.5release-4) unstable; urgency=low
+
+  * Made earliest libosp version that opensp can depend on 1.5release-0.1
+    (closes: #170253)
+  * Changed section of libosp-dev to libdevel to match current override.
+  * Changed use of DEB_BUILD_OPTIONS to conform to policy:
+    - set -g by default instead of -O2
+    - add -O2 if "noopt" is present, else -O0
+    - do nothing if "debug" is present rather than add -g
+  * Fixed failure to dist-upgrade.  Required allowing libosp3c102 to
+    coexist with libosp2, upon which new and old versions of opensp
+    depend.  These changes had the side effect of undoing the change that
+    closed 186051 and fixing it properly. (closes: #184645)
+    - Set Conflicts:, Replaces: and Provides: for libosp3c102 to libosp3.
+    - Moved libosp version info to configure.in.
+    - Versionized the gettext files with libosp version info, so sp.mo becomes
+    sp3.mo for each locale.
+  * Added call to dh_makeshlibs followed by call to dh_shlibdeps, exactly
+    like the example in man page for dh_shlibdeps.
+  * Upgraded to Standards-Version 3.6.0
+
+ -- Neil Roeth <neil@debian.org>  Fri,  1 Aug 2003 17:05:35 -0400
+
+opensp (1.5release-3) unstable; urgency=low
+
+  * Reordered definitions of classes in Attribute.h to resolve compile
+    errors when using g++ 3.3.
+
+ -- Neil Roeth <neil@debian.org>  Fri, 23 May 2003 21:26:14 -0400
+
+opensp (1.5release-2) unstable; urgency=low
+
+  * New maintainer (closes: #170867)
+  * Added libosp2 to Conflicts: for libosp3c102 (closes: #186051)
+  * Replaced call to dh_undocumented with new ospcat man page derived from
+    html; fixes lintian error due to policy change.
+
+ -- Neil Roeth <neil@debian.org>  Mon, 19 May 2003 17:35:11 -0400
+
+opensp (1.5release-1.1) unstable; urgency=low
+
+  * NMU
+  * [debian/rules] Introduced "sources-update" target.
+  * [configure.in] Define ALL_LINGUAS; added AM_MAINTAINER_MODE.
+  * Re-auto*ed the source package so it supports shared libraries on mips and
+    mipsel. (Closes: #176567)
+
+ -- J.H.M. Dassen (Ray) <jdassen@debian.org>  Sun, 16 Mar 2003 14:25:27 +0100
+
+opensp (1.5release-1) unstable; urgency=low
+
+  * New gcc2.3 build
+
+ -- Chad Miller <cmiller@debian.org>  Fri, 10 Jan 2003 21:39:11 +0000
+
+opensp (1.5release-0.1) unstable; urgency=low
+
+  * NMU
+  * Final upstream release for 1.5.
+  * Removed the --enable-xml-messages flag to ./configure, which was a
+    leftover from old tests with pre-release openjades.
+  * More upstream manpages.
+  * Hacked debian/rules so that the manpages do not get installed in
+  * all 3 binary packages.
+
+ -- Yann Dirson <dirson@debian.org>  Tue, 26 Nov 2002 01:17:14 +0100
+
+opensp (1.5pre9-0.1) unstable; urgency=low
+
+  * NMU
+  * New upstream release
+  * Updated config.{guess,sub} so that mipsel is recognized (Closes:
+    #167458).
+
+ -- Yann Dirson <dirson@debian.org>  Mon, 18 Nov 2002 23:46:02 +0100
+
+opensp (1.5pre8-0.1) unstable; urgency=low
+
+  * NMU
+  * New upstream release (Closes: #165810).
+  * Ignored all modifications to upstream code, most of them being in
+    upstream, or conflicting.
+  * Commented out regeneration of autotools files, do not build-depend on
+    them any more.  Run distclean instead of maintainer-clean.
+  * libosp soname bumped to 3, changed package name in accordance, and
+    replaced references to libosp2 in docs with generic libosp.
+  * Configure with --enable-xml-messages.
+
+ -- Yann Dirson <dirson@debian.org>  Mon, 28 Oct 2002 08:33:43 +0100
+
+opensp (1.5pre5-5.1) unstable; urgency=low
+
+  * NMU
+  * Removed "AC_SUBST(LIBOBJS)" from configure.in . The LIBOBJS variable
+    wasn't getting used and generated an error with autoconf 2.52.
+    Added "AC_SUBST(CATALOGS)" to configure.in . Regenerated build system.
+    (Closes: #142095, #148619)
+
+ -- J.H.M. Dassen (Ray) <jdassen@debian.org>  Sat, 31 Aug 2002 14:03:29 +0200
+
+opensp (1.5pre5-5) unstable; urgency=low
+
+  * moved declaration to usr/share/sgml/, to be compliant with sgml-base.
+  * changed maintainer.  (closes Bug#110803)
+
+ -- Chad Miller <cmiller@debian.org>  Tue, 18 Sep 2001 00:02:17 +0000
+
+opensp (1.5pre5-4) unstable; urgency=low
+
+  * libosp-dev now has proper depends on libosp2 and opensp, modified
+    patch from Yann Dirson
+    closes: #107239
+  * remove obsolete OJ_CHECK_SIZEOF, which was causing autoheader to puke
+  * require autoconf 2.52
+
+ -- Adam Di Carlo <aph@debian.org>  Fri, 31 Aug 2001 02:57:53 -0400
+
+opensp (1.5pre5-3) unstable; urgency=low
+
+  * debian/control: fix missing build-depends on gettext
+    closes: #105961
+
+ -- Adam Di Carlo <aph@debian.org>  Mon, 30 Jul 2001 00:50:34 -0400
+
+opensp (1.5pre5-2) unstable; urgency=low
+
+  * ship PO files in libosp package
+  * some upstream changes from CVS, not yet released; this version will
+    call itself 1.5pre6, however
+  * nsgmls: apply a patch which should enable compilation on gcc 3.0
+    closes: #103791
+  * debian/rules: make maintainer-clean upstream is incredibly fragile,
+    so tolerate errors there until that gets fixed
+  * debian/rules: during build, run libtoolize --force to replace this
+    libtoolize stuff, which is needed for arches which diverge from the
+    libtool stuff OpenSP ships with
+    closes: #101837, #104126
+  * debian/rules, control: use dh_shlibdeps, remove some hand-rolled stuff
+    here which was unnecessary and in fact adding two libosp deps on the
+    opensp package, not to mention that it stopped working
+
+ -- Adam Di Carlo <aph@debian.org>  Tue, 10 Jul 2001 16:07:33 -0400
+
+opensp (1.5pre5-1) unstable; urgency=low
+
+  * new upstream version
+  * debian/control: libosp2 goes in libs (override disparity)
+  * debian/control: libosp-dev goes in devel (request change from text,
+    mail sent to override-change@debian.org)
+  * debian/rules: clean, then maintainer-clean 
+
+ -- Adam Di Carlo <aph@debian.org>  Mon, 19 Feb 2001 01:02:04 -0500
+
+opensp (1.5pre4-5) unstable; urgency=low
+
+  * debian/rules: handle DEB_BUILD_OPTIONS
+  * debian/control: update to policy 3.5.0
+  * a few minor upstream fixes
+
+ -- Adam Di Carlo <aph@debian.org>  Fri,  2 Feb 2001 21:39:04 -0500
+
+opensp (1.5pre4-4) unstable; urgency=low
+
+  * patch from Christopher C. Chimelis to enable compilation on 64-bit
+    platforms (closes: Bug#71952)
+  * configure.in is more careful about po/Makefile.in, although we still
+    seem to get some circular situations
+  * debian/rules: put doc/*.htm in opensp doc dir (closes: Bug#68002)
+
+ -- Adam Di Carlo <aph@debian.org>  Sun, 15 Oct 2000 02:49:09 -0400
+
+opensp (1.5pre4-3) unstable; urgency=low
+
+  * they changed the major shared library version for libosp from 1 to 2,
+    but my last version didn't reflect that; conflict with libosp1, which
+    should be removed from the archive
+  * some more upstream patches from CVS
+
+ -- Adam Di Carlo <aph@debian.org>  Sat, 20 May 2000 02:08:36 -0400
+
+opensp (1.5pre4-2) unstable; urgency=low
+
+  * debian/control: add Build-Depends
+  * fix ordering of aclocal/autoheader
+  * back out bad patch to acconfig.h
+
+ -- Adam Di Carlo <aph@debian.org>  Mon,  8 May 2000 22:21:48 -0400
+
+opensp (1.5pre4-1) unstable; urgency=low
+
+  * new upstream version, prerelease
+  * debian/copyright.Debian: update locations
+  * debian/libosp-dev.README: added
+  * debian/rules: crank up the lib depends to 1.5pre4-1;
+    lintian cleanups and minor stuff
+  * acconfig.h: patch for HAVE_BOOL problem
+  * README: updates, some URLs
+  * Makefile.am, */Makefile.am: 'maintainer-clean' is cleaner; this helps
+    the debian/rules clean target quite a bit
+
+ -- Adam Di Carlo <aph@debian.org>  Sat,  6 May 2000 00:17:29 -0400
+
+opensp (1.4-1) unstable; urgency=low
+
+  * new upstream version, use pristine upstream source
+  * upload to unstable (woody)
+  * rules: bump shlibs.local to 1.4-1
+
+ -- Adam Di Carlo <aph@debian.org>  Sun,  6 Feb 2000 14:29:15 -0500
+
+opensp (1.4-0.pre3-1) experimental; urgency=low
+
+  * new package
+  * does not yet include man pages
+
+ -- Adam Di Carlo <aph@debian.org>  Wed, 29 Dec 1999 01:43:51 -0500
+
+
--- opensp-1.5.2.orig/debian/compat
+++ opensp-1.5.2/debian/compat
@@ -0,0 +1 @@
+7
--- opensp-1.5.2.orig/debian/control
+++ opensp-1.5.2/debian/control
@@ -0,0 +1,39 @@
+Source: opensp
+Section: text
+Priority: optional
+Maintainer: Neil Roeth <neil@debian.org>
+Standards-Version: 3.9.5.0
+Build-Depends: debhelper (>> 7.0.0), dh-buildinfo, xmlto, poppler-utils, openjade, jadetex, docbook-dsssl, dh-autoreconf
+
+Package: opensp
+Architecture: any
+Depends: ${shlibs:Depends}, sgml-base, ${misc:Depends}
+Suggests: doc-base, sgml-data
+Description: OpenJade group's SGML parsing tools
+ This package is a collection of SGML/XML tools called OpenSP.
+ It is a fork from James Clark's SP suite.
+ .
+ These tools are used to parse, validate, and normalize SGML and XML
+ files.  The central programs included in this package are 'onsgmls',
+ which replaces sgmls, 'ospam', 'ospent', 'osgmlnorm', and 'osx'.
+
+Package: libosp5
+Architecture: any
+Section: libs
+Depends: ${shlibs:Depends}, ${misc:Depends}
+Description: Runtime library for OpenJade group's SP suite
+ This is the SP suite's shared library runtime support.  This C++
+ library contains entity management functions, parsing functions, and
+ other functions useful for SGML/XML/DSSSL development.
+ .
+ This shared library is used by the opensp and openjade packages.
+
+Package: libosp-dev
+Architecture: any
+Section: libdevel
+Depends: ${opensp:Version}, ${libosp:Version}, ${misc:Depends}
+Recommends: c++-compiler
+Description: OpenJade group's SP suite, developer support
+ This contains include files and the static library for libosp.
+ This C++ library contains entity management functions, parsing functions,
+ and other functions useful for SGML/XML/DSSSL development. 
--- opensp-1.5.2.orig/debian/copyright.Debian
+++ opensp-1.5.2/debian/copyright.Debian
@@ -0,0 +1,17 @@
+
+-----
+
+This package has borrowed heavily from the 'jade' package.  It was originally
+made into a Debian package by Adam Di Carlo <aph@debian.org>.  It is now
+maintained by Neil Roeth <neil@debian.org>.
+
+The original source was downloaded from
+<URL:ftp://openjade.sourceforge.net/pub/openjade/> and/or
+the CVS area at cvs.openjade.sourceforge.net:/cvsroot/openjade .
+
+All materials under the 'debian' subdirectory are licensed under the
+GNU General Public License (GPL) version 2 or later.  You can find a
+copy of the GPL in /usr/share/common-licenses/GPL on Debian systems.
+Any changes made *not* under the 'debian' subdirectory are under
+the same license as the software itself.
+
--- opensp-1.5.2.orig/debian/libosp-dev.README
+++ opensp-1.5.2/debian/libosp-dev.README
@@ -0,0 +1,17 @@
+libosp and libosp-dev: OpenSP development support for Debian
+------------------------------------------------------------
+
+Include files from libosp-dev are available in /usr/include/osp .
+You might have to add this to the compiler switches.
+
+Documentation on this library is available in the 'opensp' package,
+in the Section "Programming with OpenSP".
+
+One other note: unless you include "osp/config.h" first of all, you will
+get errors. The Debian version of libosp is compiled with multibyte
+support, so you may need to compile with:
+
+ #define SP_MULTI_BYTE
+ #include <osp/config.h>
+
+.....Adam Di Carlo....adam@onShore.com.....<URL:http://www.onShore.com/>
--- opensp-1.5.2.orig/debian/libosp-dev.dirs
+++ opensp-1.5.2/debian/libosp-dev.dirs
@@ -0,0 +1,3 @@
+usr/include/OpenSP
+usr/lib
+usr/share/doc/libosp-dev
--- opensp-1.5.2.orig/debian/libosp-dev.docs
+++ opensp-1.5.2/debian/libosp-dev.docs
@@ -0,0 +1,6 @@
+debian/tmp/usr/share/doc/OpenSP/AUTHORS
+debian/tmp/usr/share/doc/OpenSP/README
+debian/tmp/usr/share/doc/OpenSP/NEWS
+debian/tmp/usr/share/doc/OpenSP/releasenotes.html
+debian/tmp/usr/share/doc/OpenSP/releasenotes.pdf
+debian/tmp/usr/share/doc/OpenSP/releasenotes.ps
--- opensp-1.5.2.orig/debian/libosp-dev.install
+++ opensp-1.5.2/debian/libosp-dev.install
@@ -0,0 +1,3 @@
+debian/tmp/usr/include/OpenSP usr/include
+debian/tmp/usr/lib/libosp.a usr/lib
+debian/tmp/usr/lib/libosp.so usr/lib
--- opensp-1.5.2.orig/debian/libosp5.README.Debian.in
+++ opensp-1.5.2/debian/libosp5.README.Debian.in
@@ -0,0 +1,23 @@
+libosp2 and libosp-dev: SP development support for Debian
+--------------------------------------------------------
+
+Include files, from libosp-dev, are available in /usr/include/OpenSP .
+You might have to add this to the compiler switches.
+
+Documentation on this library is available in the 'opensp' package,
+in the Section "Programming with SP".
+
+Note that the default search paths compiled into this system are
+equivalent to setting the following environment variables as shown:
+
+ SGML_CATALOG_FILES="%{default-catalogs}"
+ SGML_SEARCH_PATH="%{default-sgml-path}"
+
+You can override this by setting these variables yourself, i.e., in
+~/.profile or /etc/environment.
+
+One other note: unless you include "OpenSP/config.h" first of all, you
+will get errors.
+
+.....Adam Di Carlo....adam@onShore.com.....<URL:http://www.onShore.com/>
+
--- opensp-1.5.2.orig/debian/libosp5.dirs
+++ opensp-1.5.2/debian/libosp5.dirs
@@ -0,0 +1,2 @@
+usr/lib
+usr/share/doc/libosp5
--- opensp-1.5.2.orig/debian/libosp5.docs
+++ opensp-1.5.2/debian/libosp5.docs
@@ -0,0 +1,7 @@
+debian/README.Debian
+debian/tmp/usr/share/doc/OpenSP/AUTHORS
+debian/tmp/usr/share/doc/OpenSP/README
+debian/tmp/usr/share/doc/OpenSP/NEWS
+debian/tmp/usr/share/doc/OpenSP/releasenotes.html
+debian/tmp/usr/share/doc/OpenSP/releasenotes.pdf
+debian/tmp/usr/share/doc/OpenSP/releasenotes.ps
--- opensp-1.5.2.orig/debian/libosp5.install
+++ opensp-1.5.2/debian/libosp5.install
@@ -0,0 +1,3 @@
+debian/tmp/usr/lib/libosp.so.[0-9].[0-9].[0-0] usr/lib
+debian/tmp/usr/lib/libosp.so.[0-9] usr/lib
+debian/tmp/usr/share/locale usr/share
--- opensp-1.5.2.orig/debian/libosp5.postinst
+++ opensp-1.5.2/debian/libosp5.postinst
@@ -0,0 +1,11 @@
+#!/bin/sh
+
+set -e
+
+if [ "$1" = "configure" ]; then
+	ldconfig
+fi
+
+#DEBHELPER#
+
+exit 0
--- opensp-1.5.2.orig/debian/opensp.dirs
+++ opensp-1.5.2/debian/opensp.dirs
@@ -0,0 +1,6 @@
+usr/bin
+usr/share/sgml/declaration
+usr/share/man/man1
+usr/share/doc/opensp
+usr/share/doc-base
+usr/share/sgml/opensp/unicode
--- opensp-1.5.2.orig/debian/opensp.doc-base
+++ opensp-1.5.2/debian/opensp.doc-base
@@ -0,0 +1,11 @@
+Document: opensp
+Title: OpenSP Documentation
+Author: OpenJade Team
+Abstract: Users manual and documentation for the OpenSP SGML management suite.
+ This package includes an entire suite of high-quality tools to
+ parse, validate, and normalize SGML and XML files.
+Section: Text
+
+Format: HTML
+Index: /usr/share/doc/opensp/index.htm
+Files: /usr/share/doc/opensp/*.htm
--- opensp-1.5.2.orig/debian/opensp.docs
+++ opensp-1.5.2/debian/opensp.docs
@@ -0,0 +1,8 @@
+debian/README.Debian
+debian/tmp/usr/share/doc/OpenSP/AUTHORS
+debian/tmp/usr/share/doc/OpenSP/README
+debian/tmp/usr/share/doc/OpenSP/NEWS
+debian/tmp/usr/share/doc/OpenSP/releasenotes.html
+debian/tmp/usr/share/doc/OpenSP/releasenotes.pdf
+debian/tmp/usr/share/doc/OpenSP/releasenotes.ps
+debian/tmp/usr/share/doc/OpenSP/doc/*.htm
--- opensp-1.5.2.orig/debian/opensp.install
+++ opensp-1.5.2/debian/opensp.install
@@ -0,0 +1,7 @@
+debian/tmp/usr/bin usr
+debian/tmp/usr/share/OpenSP/catalog usr/share/sgml/opensp/unicode
+debian/tmp/usr/share/OpenSP/demo.sgm usr/share/sgml/opensp/unicode
+debian/tmp/usr/share/OpenSP/gensyntax.pl usr/share/sgml/opensp/unicode
+debian/tmp/usr/share/OpenSP/unicode.syn usr/share/sgml/opensp/unicode
+debian/tmp/usr/share/OpenSP/unicode.decl usr/share/sgml/opensp/unicode
+debian/tmp/usr/share/OpenSP/opensp-implied.dcl usr/share/sgml/declaration
--- opensp-1.5.2.orig/debian/opensp.manpages
+++ opensp-1.5.2/debian/opensp.manpages
@@ -0,0 +1,6 @@
+debian/tmp/usr/share/man/man1/onsgmls.1
+debian/tmp/usr/share/man/man1/osgmlnorm.1
+debian/tmp/usr/share/man/man1/ospam.1
+debian/tmp/usr/share/man/man1/ospcat.1
+debian/tmp/usr/share/man/man1/ospent.1
+debian/tmp/usr/share/man/man1/osx.1
--- opensp-1.5.2.orig/debian/rules
+++ opensp-1.5.2/debian/rules
@@ -0,0 +1,232 @@
+#!/usr/bin/make -f
+
+#export DH_VERBOSE=1
+
+pkg		:= opensp
+pkg-osp		:= $(pkg)
+libosp-maj-ver	:= $(shell egrep 'SP_LIBOSP_CUR=[0-9]+' configure.in|cut -d= -f2)
+ifeq (,$(libosp-maj-ver))
+$(error "Could not get value of SP_LIBOSP_CUR")
+endif
+pkg-libosp	:= libosp$(libosp-maj-ver)
+pkg-libosp-dev	:= libosp-dev
+
+# default SGML dir
+sgmldir			:= /usr/share/sgml
+local-sgmldir		:= /usr/local/share/sgml
+
+# default SGML pathing - see /usr/share/doc/opensp/sysid.htm
+default-sgml-path	:= $(local-sgmldir):$(sgmldir)
+default-catalogs	:= /etc/sgml/catalog
+
+# build tool abstraction
+install_	:= install -o root -g root -p
+install_file	:= install -o root -g root -m 644 -p
+install_script	:= install -o root -g root -m 755 -p
+install_program	:= install -o root -g root -m 755 -p
+ifeq (,$(findstring nostrip,$(DEB_BUILD_OPTIONS)))
+  install_program += --strip
+endif
+make_directory	:= install -d -o root -g root -m 755
+compress	:= gzip -9f
+
+DEB_BUILD_ARCH  := $(shell dpkg-architecture -qDEB_BUILD_ARCH)
+ifeq (somearch,$(DEB_BUILD_ARCH))
+  CC	:= gcc-fubar
+  CXX	:= g++-fubar
+else
+  CC	:= gcc
+  CXX	:= g++
+endif
+
+CFLAGS		:= $(shell dpkg-buildflags --get CFLAGS)
+CPPFLAGS	:= $(shell dpkg-buildflags --get CPPFLAGS)
+CXXFLAGS	:= $(shell dpkg-buildflags --get CXXFLAGS)
+LDFLAGS		:= $(shell dpkg-buildflags --get LDFLAGS)
+export CFLAGS
+export CPPFLAGS
+export CXXFLAGS
+export LDFLAGS
+
+ifeq (,$(findstring stage1,$(DEB_BUILD_PROFILES)))
+enable_doc_build := --enable-full-doc-build
+else
+enable_doc_build := --disable-doc-build
+endif
+
+# flags to get automake to use the above
+inst_flags	:= INSTALL='$(install_)'
+inst_flags	+= INSTALL_PROGRAM='$(install_program)'
+inst_flags	+= INSTALL_SCRIPT='$(install_script)'
+inst_flags	+= INSTALL_DATA='$(install_file)'
+
+# first version of package providing the right shlibs
+SHLIBS_PKGVER	:= 1.5.2-1
+
+# determine our version numbers
+SRC_VERSION	:= $(shell LC_ALL=C dpkg-parsechangelog | grep ^Version: | sed 's/^Version: *//')
+UPSTREAM_VERSION:= $(shell echo $(SRC_VERSION) | sed -e 's/^\(.*\)-[^-]*$$/\1/')
+# stuff for cvs retrieval
+cvs_src		:= $(pkg)-$(UPSTREAM_VERSION)
+orig_name	:= $(pkg)_$(UPSTREAM_VERSION).orig.tar.gz
+cvs_base_dir	:= ../cvs
+cvs_src_dir	:= $(cvs_base_dir)/$(cvs_src)
+cvs_module	:= sp
+cvs_tag		:= opensp_1_5_branch
+cvs_root	:= :pserver:anonymous@cvs.openjade.sourceforge.net:/cvsroot/openjade
+
+sources-update:
+	rm -fr $(cvs_base_dir)
+	mkdir $(cvs_base_dir)
+	cd $(cvs_base_dir) && CVSROOT=$(cvs_root) \
+		cvs checkout -d $(cvs_src) -r $(cvs_tag) $(cvs_module)
+	# Upstream has an ancient debian subdirectory, but we do not use it.
+	rm -fr $(cvs_src_dir)/debian
+	find $(cvs_src_dir) -name .cvsignore -print | xargs rm -f
+	find $(cvs_src_dir) -type d -name CVS -print | xargs rm -fr
+	cd $(cvs_base_dir) && tar -zcf $(orig_name) $(cvs_src)
+
+# Maintainer target; set AM_MAINTAINER_MODE in configure.in, so this needs to
+# be run when autotools input files change.
+autoinit:
+	./autoinit.sh
+
+clean-stamp:
+	rm -f config-stamp build-stamp install-stamp
+
+clean:
+	dh_testdir
+	rm -f debian/buildinfo
+	[ ! -f Makefile ] || $(MAKE) distclean
+	dh_autoreconf_clean
+	dh_clean config-stamp build-stamp install-stamp debian/copyright \
+	    debian/$(pkg-libosp).shlibs debian/$(pkg-libosp-dev).substvars \
+	    debian/README.Debian debian/$(pkg-libosp).README.Debian
+	# See /usr/share/doc/autotools-dev/README.Debian.gz
+	-test -r /usr/share/misc/config.sub && \
+		cp -f /usr/share/misc/config.sub config.sub
+	-test -r /usr/share/misc/config.guess && \
+		cp -f /usr/share/misc/config.guess config.guess
+
+config-stamp:
+	dh_buildinfo generate cat
+	dh_autoreconf
+	CC=$(CC) CXX=$(CXX) ./configure --prefix=/usr \
+	   --enable-http --enable-shared --enable-static \
+	   --enable-default-catalog=$(default-catalogs) \
+	   --enable-default-search-path=$(default-sgml-path) \
+	   --disable-dtddecl $(enable_doc_build)
+	touch $@
+
+configure: config-stamp
+
+build-stamp: configure
+	dh_testdir
+	$(MAKE) SUBDIRS=lib CXXFLAGS="$(CXXFLAGS) -D_REENTRANT"
+	$(MAKE)
+	touch $@
+
+build: build-arch build-indep
+build-arch: build-stamp
+build-indep: build-stamp
+
+debian/copyright:	COPYING debian/copyright.Debian
+#	 to ensure we have a verbatim copy of the upstream copyright, 
+#	 cat the Debian-specific stuff to the end of the upstream file
+	cat $^ > $@
+
+debian/$(pkg-libosp-dev).substvars:
+#	 indicate our providing version of shlibs; this must be
+#	 sync'd with debian/control
+	: > $@
+	echo "opensp:Version=$(pkg-osp) (= $(SRC_VERSION))"            >> $@
+	echo "libosp:Version=$(pkg-libosp) (= $(SRC_VERSION))"         >> $@
+	echo "libosp:ShlibVersion=$(pkg-libosp) (>= $(SHLIBS_PKGVER))" >> $@
+
+debian/$(pkg-libosp).shlibs:
+#	 std shlibs file, with the first version that supplied the version
+#	 that applications should build with
+	echo "libosp      $(libosp-maj-ver) $(pkg-libosp) (>= $(SHLIBS_PKGVER))" > $@
+
+debian/README.Debian:	debian/README.Debian.in
+#	 substitute the catalog paths
+	sed -e 's|%{default-catalogs}|$(default-catalogs)|' \
+	-e 's|%{default-sgml-path}|$(default-sgml-path)|' $^ > $@
+
+debian/$(pkg-libosp).README.Debian:	debian/$(pkg-libosp).README.Debian.in
+#	 substitute the catalog paths
+	sed -e 's|%{default-catalogs}|$(default-catalogs)|' \
+	-e 's|%{default-sgml-path}|$(default-sgml-path)|' $^ > $@
+
+install-common := debian/copyright debian/$(pkg-libosp-dev).substvars \
+		  debian/$(pkg-libosp).shlibs \
+		  debian/README.Debian debian/$(pkg-libosp).README.Debian
+
+# Install into DESTDIR, then move everything later. CURDIR is set by make.
+DESTDIR = $(CURDIR)/debian/tmp
+export DESTDIR
+install-stamp:
+	dh_testdir
+	dh_testroot
+	dh_prep
+	$(MAKE) install $(inst_flags)
+	cd $(DESTDIR)/usr/share/OpenSP && \
+	( [ -f unicode.decl ] || mv unicode.sd unicode.decl ) && \
+	( sed -e 's/unicode.sd/unicode.decl/' catalog > catalog.tmp && \
+	mv -f catalog.tmp catalog ) && \
+	chmod +x gensyntax.pl
+ifeq (,$(findstring stage1,$(DEB_BUILD_PROFILES)))
+	# Ugly fix for man page generation error
+	sed 's~\.HP.*\[\\fIsysid\\fR\.\.\.\]~[\\fIsysid\\fR...]~' $(DESTDIR)/usr/share/man/man1/onsgmls.1 > $(DESTDIR)/usr/share/man/man1/onsgmls.1.tmp && mv $(DESTDIR)/usr/share/man/man1/onsgmls.1.tmp $(DESTDIR)/usr/share/man/man1/onsgmls.1
+else
+	mkdir -p $(DESTDIR)/usr/share/man/man1 $(DESTDIR)/usr/share/doc/OpenSP
+	for f in onsgmls.1 osgmlnorm.1 ospam.1 ospcat.1 ospent.1 osx.1; do \
+		touch $(DESTDIR)/usr/share/man/man1/$$f; \
+	done
+	for ext in html pdf ps; do \
+		touch $(DESTDIR)/usr/share/doc/OpenSP/releasenotes.$$ext; \
+	done
+endif
+	touch $@
+
+install: build install-stamp $(install-common)
+
+binary-indep: install
+# There are no architecture-independent binary packages generated from this
+# source package.
+
+binary-arch: install
+	dh_testdir
+	dh_testroot
+
+	dh_installdirs
+	dh_installdocs
+	dh_installchangelogs -A ChangeLog
+	dh_installman -p opensp
+	dh_install
+
+	dh_strip -a
+	dh_compress -a
+	dh_fixperms -a
+
+	dh_buildinfo install
+
+	dh_makeshlibs
+	dh_installdeb
+	dh_shlibdeps
+
+	dh_gencontrol
+	dh_md5sums
+	dh_builddeb
+
+binary: binary-indep binary-arch
+
+TAGS:
+	etags $$(find . -path ./debian -prune -o -regex '.*\.\(cxx\|c\|h\)' -print|sed -e 's/^.\///')
+
+.PHONY: clean build install binary-indep binary-arch binary
+
+# vim: set syntax=makefile:
+# Local variables:
+# compile-command: "cd .. && fakeroot dpkg-buildpackage -uc -us"
+# End:
--- opensp-1.5.2.orig/docsrc/onsgmls.xml
+++ opensp-1.5.2/docsrc/onsgmls.xml
@@ -555,7 +555,7 @@
    <refsect1>
      <title>See Also</title>
      <para><command>ospent(1)</command>, <command>ospam(1)</command>,
-     <command>onsgmlnorm(1)</command>, <command>osx(1)</command></para>
+     <command>osgmlnorm(1)</command>, <command>osx(1)</command></para>
    </refsect1>
 
    </refentry>
--- opensp-1.5.2.orig/docsrc/ospam.xml
+++ opensp-1.5.2/docsrc/ospam.xml
@@ -355,7 +355,7 @@
    <refsect1>
      <title>See Also</title>
      <para><command>onsgmls(1)</command>, <command>ospent(1)</command>,
-     <command>onsgmlnorm(1)</command>, <command>osx(1)</command></para>
+     <command>osgmlnorm(1)</command>, <command>osx(1)</command></para>
    </refsect1>
  </refentry>
  </section>
--- opensp-1.5.2.orig/docsrc/ospcat.xml
+++ opensp-1.5.2/docsrc/ospcat.xml
@@ -188,7 +188,7 @@
 <refsect1>
 <title>See Also</title>
 <para><command>onsgmls(1)</command>, <command>ospam(1)</command>,
-<command>onsgmlnorm(1)</command>, <command>ospent(1)</command></para>
+<command>osgmlnorm(1)</command>, <command>ospent(1)</command></para>
 </refsect1>
 </refentry>
 </section>
--- opensp-1.5.2.orig/docsrc/ospent.xml
+++ opensp-1.5.2/docsrc/ospent.xml
@@ -158,7 +158,7 @@
    <refsect1>
      <title>See Also</title>
      <para><command>onsgmls(1)</command>, <command>ospam(1)</command>,
-     <command>onsgmlnorm(1)</command>, <command>osx(1)</command></para>
+     <command>osgmlnorm(1)</command>, <command>osx(1)</command></para>
    </refsect1>
 
    </refentry>
--- opensp-1.5.2.orig/docsrc/osx.xml
+++ opensp-1.5.2/docsrc/osx.xml
@@ -395,7 +395,7 @@
    <refsect1>
      <title>See Also</title>
      <para><command>onsgmls(1)</command>, <command>ospam(1)</command>,
-     <command>onsgmlnorm(1)</command>, <command>ospent(1)</command></para>
+     <command>osgmlnorm(1)</command>, <command>ospent(1)</command></para>
    </refsect1>
    </refentry>
   </section>
--- opensp-1.5.2.orig/lib/ExtendEntityManager.cxx
+++ opensp-1.5.2/lib/ExtendEntityManager.cxx
@@ -1238,7 +1238,8 @@
 }
 
 StorageObjectSpec::StorageObjectSpec(const StorageObjectSpec& x)
-: codingSystemName(x.codingSystemName),
+: storageManager(x.storageManager),
+  codingSystemName(x.codingSystemName),
   codingSystem(x.codingSystem),
   specId(x.specId),
   baseId(x.baseId),
@@ -1253,6 +1254,7 @@
 StorageObjectSpec& StorageObjectSpec::operator=(const StorageObjectSpec& x)
 {
   if (this != &x) {
+    storageManager = x.storageManager;
     codingSystemName = x.codingSystemName;
     codingSystem = x.codingSystem;
     specId = x.specId;
--- opensp-1.5.2.orig/m4/ltsugar.m4
+++ opensp-1.5.2/m4/ltsugar.m4
@@ -0,0 +1,123 @@
+# ltsugar.m4 -- libtool m4 base layer.                         -*-Autoconf-*-
+#
+# Copyright (C) 2004, 2005, 2007, 2008 Free Software Foundation, Inc.
+# Written by Gary V. Vaughan, 2004
+#
+# This file is free software; the Free Software Foundation gives
+# unlimited permission to copy and/or distribute it, with or without
+# modifications, as long as this notice is preserved.
+
+# serial 6 ltsugar.m4
+
+# This is to help aclocal find these macros, as it can't see m4_define.
+AC_DEFUN([LTSUGAR_VERSION], [m4_if([0.1])])
+
+
+# lt_join(SEP, ARG1, [ARG2...])
+# -----------------------------
+# Produce ARG1SEPARG2...SEPARGn, omitting [] arguments and their
+# associated separator.
+# Needed until we can rely on m4_join from Autoconf 2.62, since all earlier
+# versions in m4sugar had bugs.
+m4_define([lt_join],
+[m4_if([$#], [1], [],
+       [$#], [2], [[$2]],
+       [m4_if([$2], [], [], [[$2]_])$0([$1], m4_shift(m4_shift($@)))])])
+m4_define([_lt_join],
+[m4_if([$#$2], [2], [],
+       [m4_if([$2], [], [], [[$1$2]])$0([$1], m4_shift(m4_shift($@)))])])
+
+
+# lt_car(LIST)
+# lt_cdr(LIST)
+# ------------
+# Manipulate m4 lists.
+# These macros are necessary as long as will still need to support
+# Autoconf-2.59 which quotes differently.
+m4_define([lt_car], [[$1]])
+m4_define([lt_cdr],
+[m4_if([$#], 0, [m4_fatal([$0: cannot be called without arguments])],
+       [$#], 1, [],
+       [m4_dquote(m4_shift($@))])])
+m4_define([lt_unquote], $1)
+
+
+# lt_append(MACRO-NAME, STRING, [SEPARATOR])
+# ------------------------------------------
+# Redefine MACRO-NAME to hold its former content plus `SEPARATOR'`STRING'.
+# Note that neither SEPARATOR nor STRING are expanded; they are appended
+# to MACRO-NAME as is (leaving the expansion for when MACRO-NAME is invoked).
+# No SEPARATOR is output if MACRO-NAME was previously undefined (different
+# than defined and empty).
+#
+# This macro is needed until we can rely on Autoconf 2.62, since earlier
+# versions of m4sugar mistakenly expanded SEPARATOR but not STRING.
+m4_define([lt_append],
+[m4_define([$1],
+	   m4_ifdef([$1], [m4_defn([$1])[$3]])[$2])])
+
+
+
+# lt_combine(SEP, PREFIX-LIST, INFIX, SUFFIX1, [SUFFIX2...])
+# ----------------------------------------------------------
+# Produce a SEP delimited list of all paired combinations of elements of
+# PREFIX-LIST with SUFFIX1 through SUFFIXn.  Each element of the list
+# has the form PREFIXmINFIXSUFFIXn.
+# Needed until we can rely on m4_combine added in Autoconf 2.62.
+m4_define([lt_combine],
+[m4_if(m4_eval([$# > 3]), [1],
+       [m4_pushdef([_Lt_sep], [m4_define([_Lt_sep], m4_defn([lt_car]))])]]dnl
+[[m4_foreach([_Lt_prefix], [$2],
+	     [m4_foreach([_Lt_suffix],
+		]m4_dquote(m4_dquote(m4_shift(m4_shift(m4_shift($@)))))[,
+	[_Lt_sep([$1])[]m4_defn([_Lt_prefix])[$3]m4_defn([_Lt_suffix])])])])])
+
+
+# lt_if_append_uniq(MACRO-NAME, VARNAME, [SEPARATOR], [UNIQ], [NOT-UNIQ])
+# -----------------------------------------------------------------------
+# Iff MACRO-NAME does not yet contain VARNAME, then append it (delimited
+# by SEPARATOR if supplied) and expand UNIQ, else NOT-UNIQ.
+m4_define([lt_if_append_uniq],
+[m4_ifdef([$1],
+	  [m4_if(m4_index([$3]m4_defn([$1])[$3], [$3$2$3]), [-1],
+		 [lt_append([$1], [$2], [$3])$4],
+		 [$5])],
+	  [lt_append([$1], [$2], [$3])$4])])
+
+
+# lt_dict_add(DICT, KEY, VALUE)
+# -----------------------------
+m4_define([lt_dict_add],
+[m4_define([$1($2)], [$3])])
+
+
+# lt_dict_add_subkey(DICT, KEY, SUBKEY, VALUE)
+# --------------------------------------------
+m4_define([lt_dict_add_subkey],
+[m4_define([$1($2:$3)], [$4])])
+
+
+# lt_dict_fetch(DICT, KEY, [SUBKEY])
+# ----------------------------------
+m4_define([lt_dict_fetch],
+[m4_ifval([$3],
+	m4_ifdef([$1($2:$3)], [m4_defn([$1($2:$3)])]),
+    m4_ifdef([$1($2)], [m4_defn([$1($2)])]))])
+
+
+# lt_if_dict_fetch(DICT, KEY, [SUBKEY], VALUE, IF-TRUE, [IF-FALSE])
+# -----------------------------------------------------------------
+m4_define([lt_if_dict_fetch],
+[m4_if(lt_dict_fetch([$1], [$2], [$3]), [$4],
+	[$5],
+    [$6])])
+
+
+# lt_dict_filter(DICT, [SUBKEY], VALUE, [SEPARATOR], KEY, [...])
+# --------------------------------------------------------------
+m4_define([lt_dict_filter],
+[m4_if([$5], [], [],
+  [lt_join(m4_quote(m4_default([$4], [[, ]])),
+           lt_unquote(m4_split(m4_normalize(m4_foreach(_Lt_key, lt_car([m4_shiftn(4, $@)]),
+		      [lt_if_dict_fetch([$1], _Lt_key, [$2], [$3], [_Lt_key ])])))))])[]dnl
+])
--- opensp-1.5.2.orig/m4/lt~obsolete.m4
+++ opensp-1.5.2/m4/lt~obsolete.m4
@@ -0,0 +1,98 @@
+# lt~obsolete.m4 -- aclocal satisfying obsolete definitions.    -*-Autoconf-*-
+#
+#   Copyright (C) 2004, 2005, 2007, 2009 Free Software Foundation, Inc.
+#   Written by Scott James Remnant, 2004.
+#
+# This file is free software; the Free Software Foundation gives
+# unlimited permission to copy and/or distribute it, with or without
+# modifications, as long as this notice is preserved.
+
+# serial 5 lt~obsolete.m4
+
+# These exist entirely to fool aclocal when bootstrapping libtool.
+#
+# In the past libtool.m4 has provided macros via AC_DEFUN (or AU_DEFUN)
+# which have later been changed to m4_define as they aren't part of the
+# exported API, or moved to Autoconf or Automake where they belong.
+#
+# The trouble is, aclocal is a bit thick.  It'll see the old AC_DEFUN
+# in /usr/share/aclocal/libtool.m4 and remember it, then when it sees us
+# using a macro with the same name in our local m4/libtool.m4 it'll
+# pull the old libtool.m4 in (it doesn't see our shiny new m4_define
+# and doesn't know about Autoconf macros at all.)
+#
+# So we provide this file, which has a silly filename so it's always
+# included after everything else.  This provides aclocal with the
+# AC_DEFUNs it wants, but when m4 processes it, it doesn't do anything
+# because those macros already exist, or will be overwritten later.
+# We use AC_DEFUN over AU_DEFUN for compatibility with aclocal-1.6. 
+#
+# Anytime we withdraw an AC_DEFUN or AU_DEFUN, remember to add it here.
+# Yes, that means every name once taken will need to remain here until
+# we give up compatibility with versions before 1.7, at which point
+# we need to keep only those names which we still refer to.
+
+# This is to help aclocal find these macros, as it can't see m4_define.
+AC_DEFUN([LTOBSOLETE_VERSION], [m4_if([1])])
+
+m4_ifndef([AC_LIBTOOL_LINKER_OPTION],	[AC_DEFUN([AC_LIBTOOL_LINKER_OPTION])])
+m4_ifndef([AC_PROG_EGREP],		[AC_DEFUN([AC_PROG_EGREP])])
+m4_ifndef([_LT_AC_PROG_ECHO_BACKSLASH],	[AC_DEFUN([_LT_AC_PROG_ECHO_BACKSLASH])])
+m4_ifndef([_LT_AC_SHELL_INIT],		[AC_DEFUN([_LT_AC_SHELL_INIT])])
+m4_ifndef([_LT_AC_SYS_LIBPATH_AIX],	[AC_DEFUN([_LT_AC_SYS_LIBPATH_AIX])])
+m4_ifndef([_LT_PROG_LTMAIN],		[AC_DEFUN([_LT_PROG_LTMAIN])])
+m4_ifndef([_LT_AC_TAGVAR],		[AC_DEFUN([_LT_AC_TAGVAR])])
+m4_ifndef([AC_LTDL_ENABLE_INSTALL],	[AC_DEFUN([AC_LTDL_ENABLE_INSTALL])])
+m4_ifndef([AC_LTDL_PREOPEN],		[AC_DEFUN([AC_LTDL_PREOPEN])])
+m4_ifndef([_LT_AC_SYS_COMPILER],	[AC_DEFUN([_LT_AC_SYS_COMPILER])])
+m4_ifndef([_LT_AC_LOCK],		[AC_DEFUN([_LT_AC_LOCK])])
+m4_ifndef([AC_LIBTOOL_SYS_OLD_ARCHIVE],	[AC_DEFUN([AC_LIBTOOL_SYS_OLD_ARCHIVE])])
+m4_ifndef([_LT_AC_TRY_DLOPEN_SELF],	[AC_DEFUN([_LT_AC_TRY_DLOPEN_SELF])])
+m4_ifndef([AC_LIBTOOL_PROG_CC_C_O],	[AC_DEFUN([AC_LIBTOOL_PROG_CC_C_O])])
+m4_ifndef([AC_LIBTOOL_SYS_HARD_LINK_LOCKS], [AC_DEFUN([AC_LIBTOOL_SYS_HARD_LINK_LOCKS])])
+m4_ifndef([AC_LIBTOOL_OBJDIR],		[AC_DEFUN([AC_LIBTOOL_OBJDIR])])
+m4_ifndef([AC_LTDL_OBJDIR],		[AC_DEFUN([AC_LTDL_OBJDIR])])
+m4_ifndef([AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH], [AC_DEFUN([AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH])])
+m4_ifndef([AC_LIBTOOL_SYS_LIB_STRIP],	[AC_DEFUN([AC_LIBTOOL_SYS_LIB_STRIP])])
+m4_ifndef([AC_PATH_MAGIC],		[AC_DEFUN([AC_PATH_MAGIC])])
+m4_ifndef([AC_PROG_LD_GNU],		[AC_DEFUN([AC_PROG_LD_GNU])])
+m4_ifndef([AC_PROG_LD_RELOAD_FLAG],	[AC_DEFUN([AC_PROG_LD_RELOAD_FLAG])])
+m4_ifndef([AC_DEPLIBS_CHECK_METHOD],	[AC_DEFUN([AC_DEPLIBS_CHECK_METHOD])])
+m4_ifndef([AC_LIBTOOL_PROG_COMPILER_NO_RTTI], [AC_DEFUN([AC_LIBTOOL_PROG_COMPILER_NO_RTTI])])
+m4_ifndef([AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE], [AC_DEFUN([AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE])])
+m4_ifndef([AC_LIBTOOL_PROG_COMPILER_PIC], [AC_DEFUN([AC_LIBTOOL_PROG_COMPILER_PIC])])
+m4_ifndef([AC_LIBTOOL_PROG_LD_SHLIBS],	[AC_DEFUN([AC_LIBTOOL_PROG_LD_SHLIBS])])
+m4_ifndef([AC_LIBTOOL_POSTDEP_PREDEP],	[AC_DEFUN([AC_LIBTOOL_POSTDEP_PREDEP])])
+m4_ifndef([LT_AC_PROG_EGREP],		[AC_DEFUN([LT_AC_PROG_EGREP])])
+m4_ifndef([LT_AC_PROG_SED],		[AC_DEFUN([LT_AC_PROG_SED])])
+m4_ifndef([_LT_CC_BASENAME],		[AC_DEFUN([_LT_CC_BASENAME])])
+m4_ifndef([_LT_COMPILER_BOILERPLATE],	[AC_DEFUN([_LT_COMPILER_BOILERPLATE])])
+m4_ifndef([_LT_LINKER_BOILERPLATE],	[AC_DEFUN([_LT_LINKER_BOILERPLATE])])
+m4_ifndef([_AC_PROG_LIBTOOL],		[AC_DEFUN([_AC_PROG_LIBTOOL])])
+m4_ifndef([AC_LIBTOOL_SETUP],		[AC_DEFUN([AC_LIBTOOL_SETUP])])
+m4_ifndef([_LT_AC_CHECK_DLFCN],		[AC_DEFUN([_LT_AC_CHECK_DLFCN])])
+m4_ifndef([AC_LIBTOOL_SYS_DYNAMIC_LINKER],	[AC_DEFUN([AC_LIBTOOL_SYS_DYNAMIC_LINKER])])
+m4_ifndef([_LT_AC_TAGCONFIG],		[AC_DEFUN([_LT_AC_TAGCONFIG])])
+m4_ifndef([AC_DISABLE_FAST_INSTALL],	[AC_DEFUN([AC_DISABLE_FAST_INSTALL])])
+m4_ifndef([_LT_AC_LANG_CXX],		[AC_DEFUN([_LT_AC_LANG_CXX])])
+m4_ifndef([_LT_AC_LANG_F77],		[AC_DEFUN([_LT_AC_LANG_F77])])
+m4_ifndef([_LT_AC_LANG_GCJ],		[AC_DEFUN([_LT_AC_LANG_GCJ])])
+m4_ifndef([AC_LIBTOOL_LANG_C_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_C_CONFIG])])
+m4_ifndef([_LT_AC_LANG_C_CONFIG],	[AC_DEFUN([_LT_AC_LANG_C_CONFIG])])
+m4_ifndef([AC_LIBTOOL_LANG_CXX_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_CXX_CONFIG])])
+m4_ifndef([_LT_AC_LANG_CXX_CONFIG],	[AC_DEFUN([_LT_AC_LANG_CXX_CONFIG])])
+m4_ifndef([AC_LIBTOOL_LANG_F77_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_F77_CONFIG])])
+m4_ifndef([_LT_AC_LANG_F77_CONFIG],	[AC_DEFUN([_LT_AC_LANG_F77_CONFIG])])
+m4_ifndef([AC_LIBTOOL_LANG_GCJ_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_GCJ_CONFIG])])
+m4_ifndef([_LT_AC_LANG_GCJ_CONFIG],	[AC_DEFUN([_LT_AC_LANG_GCJ_CONFIG])])
+m4_ifndef([AC_LIBTOOL_LANG_RC_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_RC_CONFIG])])
+m4_ifndef([_LT_AC_LANG_RC_CONFIG],	[AC_DEFUN([_LT_AC_LANG_RC_CONFIG])])
+m4_ifndef([AC_LIBTOOL_CONFIG],		[AC_DEFUN([AC_LIBTOOL_CONFIG])])
+m4_ifndef([_LT_AC_FILE_LTDLL_C],	[AC_DEFUN([_LT_AC_FILE_LTDLL_C])])
+m4_ifndef([_LT_REQUIRED_DARWIN_CHECKS],	[AC_DEFUN([_LT_REQUIRED_DARWIN_CHECKS])])
+m4_ifndef([_LT_AC_PROG_CXXCPP],		[AC_DEFUN([_LT_AC_PROG_CXXCPP])])
+m4_ifndef([_LT_PREPARE_SED_QUOTE_VARS],	[AC_DEFUN([_LT_PREPARE_SED_QUOTE_VARS])])
+m4_ifndef([_LT_PROG_ECHO_BACKSLASH],	[AC_DEFUN([_LT_PROG_ECHO_BACKSLASH])])
+m4_ifndef([_LT_PROG_F77],		[AC_DEFUN([_LT_PROG_F77])])
+m4_ifndef([_LT_PROG_FC],		[AC_DEFUN([_LT_PROG_FC])])
+m4_ifndef([_LT_PROG_CXX],		[AC_DEFUN([_LT_PROG_CXX])])
--- opensp-1.5.2.orig/onsgmls.1
+++ opensp-1.5.2/onsgmls.1
@@ -0,0 +1,387 @@
+'\" t
+.\"     Title: onsgmls
+.\"    Author: 
+.\" Generator: DocBook XSL Stylesheets v1.75.1 <http://docbook.sf.net/>
+.\"      Date: November 2002
+.\"    Manual: Reference
+.\"    Source: OpenSP
+.\"  Language: English
+.\"
+.TH "ONSGMLS" "1" "November 2002" "OpenSP" "Reference"
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+onsgmls \- An SGML/XML parser and validator
+.SH "SYNOPSIS"
+.HP \w'\fBonsgmls\fR\ 'u
+\fBonsgmls\fR [\fB\-BCdeghlnpRrsuvx\fR] [\fB\-a\fR\fB\fIlinktype\fR\fR] [\fB\-A\fR\fB\fIarchitecture\fR\fR] [\fB\-b\fR\fB\fIbctf\fR\fR] [\fB\-c\fR\fB\fIsysid\fR\fR...] [\fB\-D\fR\fB\fIdirectory\fR\fR] [\fB\-E\fR\fB\fImax_errors\fR\fR] [\fB\-f\fR\fB\fIfile\fR\fR] [\fB\-i\fR\fB\fIname\fR\fR] [\fB\-o\fR\fB\fIoutput_option\fR\fR...] [\fB\-t\fR\fB\fIfile\fR\fR] [\fB\-w\fR\fB\fIwarning_type\fR\fR...] [\fB\fIsysid\fR\fR...]
+.SH "DESCRIPTION"
+.PP
+\fBonsgmls\fR
+parses and validates the SGML document whose document entity is specified by the system identifiers
+.HP \w'\ 'u [\fIsysid\fR...]
+and prints on the standard output a simple text representation of its Element Structure Information Set\&. (This is the information set which a structure\-controlled conforming SGML application should act upon\&.) If more than one system identifier is specified, then the corresponding entities will be concatenated to form the document entity\&. Thus the document entity may be spread among several files; for example, the SGML declaration, prolog and document instance set could each be in a separate file\&. If no system identifiers are specified, then onsgmls will read the document entity from the standard input\&. A command line system identifier of \- can be used to refer to the standard input\&. (Normally in a system identifier, <OSFD>0 is used to refer to standard input\&.)
+.PP
+Part of an SGML System Conforming to International Standard ISO 8879 \-\- Standard Generalized Markup Language\&. An SGML Extended Facilities system conforming to Annex A of Internal Standard ISO/IEC 10744 \-\- Hypermedia/Time\-based Structuring Language
+.PP
+The following options are available:
+.PP
+\fB\-a\fR\fB\fIlinktype\fR\fR, \fB\-\-activate=\fR\fB\fIlinktype\fR\fR
+.RS 4
+Make link type
+\fIlinktype\fR
+active\&. Not all ESIS information is output in this case: the active LPDs are not explicitly reported, although each link attribute is qualified with its link type name; there is no information about result elements; when there are multiple link rules applicable to the current element, onsgmls always chooses the first\&.
+.RE
+.PP
+\fB\-A\fR\fB\fIarchitecture\fR\fR, \fB\-\-architecture=\fR\fB\fIarchitecture\fR\fR
+.RS 4
+Parse with respect to architecture
+\fIarchitecture\fR\&.
+.RE
+.PP
+\fB\-b\fR\fB\fIbctf\fR\fR, \fB\-\-bctf=\fR\fB\fIbctf\fR\fR, \fB\-b\fR\fB\fIencoding\fR\fR, \fB\-\-encoding=\fR\fB\fIencoding\fR\fR
+.RS 4
+This determines the encoding used for output\&. If in fixed character set mode it specifies the name of an encoding; if not, it specifies the name of a BCTF\&.
+.RE
+.PP
+\fB\-B\fR, \fB\-\-batch_mode\fR
+.RS 4
+Batch mode\&. Parse each
+.HP \w'\ 'u [\fB\fIsysid\fR\fR...]
+specified on the command line separately, rather than concatenating them\&. This is useful mainly with
+\fB\-s\fR\&.
+.sp
+If
+\fB\-t\fR\fB\fIfilename\fR\fR
+is also specified, then the specified filename will be prefixed to the
+\fIsysid\fR
+to make the filename for the RAST result for each
+\fIsysid\fR\&.
+.RE
+.PP
+\fB\-c\fR\fB\fIsysid\fR\fR, \fB\-\-catalog=\fR\fB\fIsysid\fR\fR
+.RS 4
+Map public identifiers and entity names to system identifiers using the catalog entry file whose system identifier is sysid\&. Multiple
+\fB\-c\fR
+options are allowed\&. If there is a catalog entry file called catalog in the same place as the document entity, it will be searched for immediately after those specified by
+\fB\-c\fR\&.
+.RE
+.PP
+\fB\-C\fR, \fB\-\-catalogs\fR
+.RS 4
+The
+.HP \w'\ 'u [\fB\fIfilename\fR\fR...]
+arguments specify catalog files rather than the document entity\&. The document entity is specified by the first DOCUMENT entry in the catalog files\&.
+.RE
+.PP
+\fB\-D\fR\fB\fIdirectory\fR\fR, \fB\-\-directory=\fR\fB\fIdirectory\fR\fR
+.RS 4
+Search
+\fIdirectory\fR
+for files specified in system identifiers\&. Multiple
+\fB\-D\fR
+options are allowed\&. See the description of the osfile storage manager for more information about file searching\&.
+.RE
+.PP
+\fB\-e\fR, \fB\-\-open\-entities\fR
+.RS 4
+Describe open entities in error messages\&. Error messages always include the position of the most recently opened external entity\&.
+.RE
+.PP
+\fB\-E\fR\fB\fImax_errors\fR\fR, \fB\-\-max\-errors=\fR\fB\fImax_errors\fR\fR
+.RS 4
+onsgmls will exit after
+\fImax_errors\fR
+errors\&. If
+\fImax_errors\fR
+is 0, there is no limit on the number of errors\&. The default is 200\&.
+.RE
+.PP
+\fB\-f\fR\fB\fIfile\fR\fR, \fB\-\-error\-file=\fR\fB\fIfile\fR\fR
+.RS 4
+Redirect errors to
+\fIfile\fR\&. This is useful mainly with shells that do not support redirection of stderr\&.
+.RE
+.PP
+\fB\-g\fR, \fB\-\-open\-elements\fR
+.RS 4
+Show the generic identifiers of open elements in error messages\&.
+.RE
+.PP
+\fB\-h\fR, \fB\-\-help\fR
+.RS 4
+Show a help message and exit\&.
+.RE
+.PP
+\fB\-i\fR\fB\fIname\fR\fR, \fB\-\-include=\fR\fB\fIname\fR\fR
+.RS 4
+Pretend that
+.sp
+<!ENTITY %
+\fIname\fR
+"INCLUDE">
+.sp
+occurs at the start of the document type declaration subset in the SGML document entity\&. Since repeated definitions of an entity are ignored, this definition will take precedence over any other definitions of this entity in the document type declaration\&. Multiple \-i options are allowed\&. If the SGML declaration replaces the reserved name INCLUDE then the new reserved name will be the replacement text of the entity\&. Typically the document type declaration will contain
+.sp
+<!ENTITY %
+\fIname\fR
+"IGNORE">
+.sp
+and will use %\fIname\fR; in the status keyword specification of a marked section declaration\&. In this case the effect of the option will be to cause the marked section not to be ignored\&.
+.RE
+.PP
+\fB\-n\fR, \fB\-\-error\-numbers\fR
+.RS 4
+Show message numbers in error messages\&.
+.RE
+.PP
+\fB\-o\fR\fB\fIoutput_option\fR\fR, \fB\-\-option=\fR\fB\fIoutput_option\fR\fR
+.RS 4
+Output additional information according to
+\fIoutput_option\fR:
+.sp
+\fBentity\fR
+Output definitions of all general entities not just for data or subdoc entities that are referenced or named in an ENTITY or ENTITIES attribute\&.
+.sp
+\fBid\fR
+Distinguish attributes whose declared value is ID\&.
+.sp
+\fBline\fR
+Output L commands giving the current line number and filename\&.
+.sp
+\fBincluded\fR
+Output an i command for included sub\-elements\&.
+.sp
+\fBempty\fR
+Output an e command for elements which are not allowed to have an end\-tag, that is those with a declared content of empty or with a content reference attribute\&.
+.sp
+\fBnotation\-sysid\fR
+Output an f command before an N command, if a system identifier could be generated for that notation\&.
+.sp
+\fBnonsgml\fR
+In fixed character set mode, output \e% escape sequences for non\-SGML data characters\&. Non\-SGML data characters can result from numeric character references\&.
+.sp
+\fBdata\-attribute\fR
+Output the notation name and attributes for DATA attributes\&. Otherwise, DATA attributes are treated like CDATA attributes\&. For more details see clause 4\&.4\&.3 of Annex K of ISO 8879\&.
+.sp
+\fBcomment\fR
+Output an _ command with the contents of a comment\&. Multiple comments in a single comment declaration will result in multiple distinct _ commands, just as if the comments were each in a separate comment declaration\&.
+.sp
+\fBomitted\fR
+Output an o command before a command which was implied by the input document, but omitted from the actual markup\&. This currently affects (,), and A commands\&.
+.sp
+\fBtagomit\fR
+As
+\fBomitted\fR, but only for ( and ) commands\&.
+.sp
+\fBattromit\fR
+As
+\fBomitted\fR, but only for A commands\&.
+.sp
+Multiple
+\fB\-o\fR
+options are allowed\&.
+.RE
+.PP
+\fB\-p\fR, \fB\-\-only\-prolog\fR
+.RS 4
+Parse only the prolog\&.
+\fBonsgmls\fR
+will exit after parsing the document type declaration\&. Implies
+\fB\-s\fR\&.
+.RE
+.PP
+\fB\-R\fR, \fB\-\-restricted\fR
+.RS 4
+Restrict file reading\&. This option is intended for use with onsgmls\-based Web tools (e\&.g\&. CGI scripts) to prevent reading of arbitrary files on the Web server\&. With this option enabled,
+\fBonsgmls\fR
+will not read any local files unless they are located in a directory (or subdirectory) specified by the
+\fB\-D\fR
+option or included in the SGML_SEARCH_PATH environment variable\&. As a further security precaution, this option limits filesnames to the characters A\-Z, a\-z, 0\-9, \'?\', \'\&.\', \'_\', \'\-\' and does not allow filenames containing "\&.\&."\&. On systems with MS\-DOS file names \':\' and \'\e\' are also allowed\&.
+.RE
+.PP
+\fB\-s\fR, \fB\-\-no\-output\fR
+.RS 4
+Suppress output\&. Error messages will still be printed\&.
+.RE
+.PP
+\fB\-t\fR\fB\fIfile\fR\fR, \fB\-\-rast\-file=\fR\fB\fIfile\fR\fR
+.RS 4
+Output to
+\fIfile\fR
+the RAST result as defined by ISO/IEC 13673:1995 (actually this isn\'t quite an IS yet; this implements the Intermediate Editor\'s Draft of 1994/08/29, with changes to implement ISO/IEC JTC1/SC18/WG8 N1777)\&. The normal output is not produced\&.
+.RE
+.PP
+\fB\-v\fR, \fB\-\-version\fR
+.RS 4
+Print the version number\&.
+.RE
+.PP
+\fB\-w\fR\fB\fItype\fR\fR, \fB\-\-warning=\fR\fB\fItype\fR\fR
+.RS 4
+Control warnings and errors\&. Multiple
+\fB\-w\fR
+options are allowed\&. The following values of type enable warnings:
+.sp
+\fBxml\fR
+Warn about constructs that are not allowed by XML\&.
+.sp
+\fBmixed\fR
+Warn about mixed content models that do not allow #PCDATA anywhere\&.
+.sp
+\fBsgmldecl\fR
+Warn about various dubious constructions in the SGML declaration\&.
+.sp
+\fBshould\fR
+Warn about various recommendations made in ISO 8879 that the document does not comply with\&. (Recommendations are expressed with "should", as distinct from requirements which are usually expressed with "shall"\&.)
+.sp
+\fBdefault\fR
+Warn about defaulted references\&.
+.sp
+\fBduplicate\fR
+Warn about duplicate entity declarations\&.
+.sp
+\fBundefined\fR
+Warn about undefined elements: elements used in the DTD but not defined\&.
+.sp
+\fBunclosed\fR
+Warn about unclosed start and end\-tags\&.
+.sp
+\fBempty\fR
+Warn about empty start and end\-tags\&.
+.sp
+\fBnet\fR
+Warn about net\-enabling start\-tags and null end\-tags\&.
+.sp
+\fBmin\-tag\fR
+Warn about minimized start and end\-tags\&. Equivalent to combination of unclosed, empty and net warnings\&.
+.sp
+\fBunused\-map\fR
+Warn about unused short reference maps: maps that are declared with a short reference mapping declaration but never used in a short reference use declaration in the DTD\&.
+.sp
+\fBunused\-param\fR
+Warn about parameter entities that are defined but not used in a DTD\&. Unused internal parameter entities whose text is INCLUDE or IGNORE won\'t get the warning\&.
+.sp
+\fBnotation\-sysid\fR
+Warn about notations for which no system identifier could be generated\&.
+.sp
+\fBall\fR
+Warn about conditions that should usually be avoided (in the opinion of the author)\&. Equivalent to: mixed, should, default, undefined, sgmldecl, unused\-map, unused\-param, empty and unclosed\&.
+.sp
+\fBimmediate\-recursion\fR
+Warn about immediately recursive elements\&. For more detais see clause 2\&.2\&.5 of Annex K of ISO 8879\&.
+.sp
+\fBfully\-declared\fR
+Warn if the document instance fails to be fully declared\&. This has the effect of changing the SGML declaration to specify IMPLYDEF ATTLIST NO ELEMENT NO ENTITY NO NOTATION NO\&. For more details see clause 2\&.2\&.1 of Annex K of ISO 8879\&.
+.sp
+\fBfully\-tagged\fR
+Warn if the document instance fails to be fully\-tagged\&. This has the effect of changing the SGML declaration to specify DATATAG NO, RANK NO, OMITTAG NO, SHORTTAG STARTTAG EMPTY NO and SHORTTAG ATTRIB OMITNAME NO\&. For more details see clause 2\&.2\&.2 of Annex K of ISO 8879\&.
+.sp
+\fBamply\-tagged, amply\-tagged\-recursive\fR
+Warn if the doucment instance fails to be amply\-tagged\&. Implicitly defined elements may be immediately recurisve if
+\fBamply\-tagged\-recursive\fR
+is specified\&. This has the effect of changing the SGML declaration to specify DATATAG NO, RANK NO, OMITTAG NO, SHORTTAG ATTRIB OMITNAME NO and either IMPLYDEF ELEMENT ANYOTHER or IMPLYDEF ELEMENT YES\&. For more details see clause 2\&.2\&.4 of Annex K of ISO 8879\&.
+.sp
+\fBtype\-valid\fR
+Warn if the document instance fails to be type\-valid\&. This has the effect of changing the SGML declaration to specify VALIDITY YES\&. For more details see clause 2\&.2\&.3 of Annex K of ISO 8879\&.
+.sp
+\fBentity\-ref\fR
+Warn about references to non\-predefined entities\&. This has the effect of changing the SGML declaration to specify ENTITIES REF NONE\&. For more details see clause 2\&.3\&.2 of Annex K of ISO 8879\&.
+.sp
+\fBexternal\-entity\-ref\fR
+Warn about references to external entities\&. This includes references to an external DTD subset\&. This has the effect of changing the SGML declaration to specify ENTITIES REF INTERNAL\&. For more details see clause 2\&.3\&.3 of Annex K of ISO 8879\&.
+.sp
+\fBintegral\fR
+Warn if the document instance is not integrally stored\&. This has the effect of changing the SGML declaration to specify ENTITIES INTEGRAL YES\&. For more details see clause 2\&.3\&.1 of Annex K of ISO 8879\&.
+.sp
+A warning can be disabled by using its name prefixed with no\-\&. Thus
+\fB\-wall\fR
+\fB\-wno\-duplicate\fR
+will enable all warnings except those about duplicate entity declarations\&.
+.sp
+The following values for
+\fIwarning_type\fR
+disable errors:
+.sp
+\fBno\-idref\fR
+Do not give an error for an ID reference value which no element has as its ID\&. The effect will be as if each attribute declared as an ID reference value had been declared as a name\&.
+.sp
+\fBno\-significant\fR
+Do not give an error when a character that is not a significant character in the reference concrete syntax occurs in a literal in the SGML declaration\&. This may be useful in conjunction with certain buggy test suites\&.
+.sp
+\fBno\-valid\fR
+Do not require the document to be type\-valid\&. This has the effect of changing the SGML declaration to specify VALIDITY NOASSERT and IMPLYDEF ATTLIST YES ELEMENT YES\&. An option of
+\fB\-wvalid\fR
+has the effect of changing the SGML declaration to specify VALIDITY TYPE and IMPLYDEF ATTLIST NO ELEMENT NO\&. If neither
+\fB\-wvalid\fR
+nor
+\fB\-wno\-valid\fR
+are specified, then the VALIDITY and IMPLYDEF specified in the SGML declaration will be used\&.
+.sp
+\fBno\-afdr\fR
+Do not give errors when AFDR meta\-DTD notation features are used in the DTD\&. These errors are normally produced when parsing the DTD, but suppressed when parsing meta\-DTDs\&.
+.RE
+.PP
+\fB\-x\fR, \fB\-\-references\fR
+.RS 4
+Show information about relevant clauses (from ISO 8879:1986) in error messages\&.
+.RE
+.PP
+The following options are also supported for backward compatibility with sgmls:
+.PP
+\fB\-d\fR
+.RS 4
+Same as
+\fB\-wduplicate\fR\&.
+.RE
+.PP
+\fB\-l\fR
+.RS 4
+Same as
+\fB\-oline\fR\&.
+.RE
+.PP
+\fB\-m\fR\fB\fIsysid\fR\fR
+.RS 4
+Same as
+\fB\-c\fR\&.
+.RE
+.PP
+\fB\-r\fR
+.RS 4
+Same as
+\fB\-wdefault\fR\&.
+.RE
+.PP
+\fB\-u\fR
+.RS 4
+Same as
+\fB\-wundef\fR\&.
+.RE
+.SH "SEE ALSO"
+.PP
+\fBospent(1)\fR,
+\fBospam(1)\fR,
+\fBosgmlnorm(1)\fR,
+\fBosx(1)\fR
+.SH "AUTHORS"
+.PP
+\fBJames Clark\fR
+.RS 4
+Author.
+.RE
+.PP
+\fBIan Castle\fR <\&ian.castle@openjade.org\&>
+.RS 4
+Author.
+.RE
+.SH "COPYRIGHT"
+.br
--- opensp-1.5.2.orig/sx/XmlOutputEventHandler.cxx
+++ opensp-1.5.2/sx/XmlOutputEventHandler.cxx
@@ -1199,12 +1199,22 @@
           // Check to make sure we haven't passed outside of the
           // output directory
 	  char *dirs = strdup (filePath);
+#ifdef MAXPATHLEN
           char realDirs[MAXPATHLEN];
           char realOutputDir[MAXPATHLEN];
+#else
+          char *realDirs;
+          char *realOutputDir;
+#endif
           char *outputDir = strdup(outputDir_);
 
+#ifdef MAXPATHLEN
           realpath((const char *)dirname(dirs), realDirs);
           realpath((const char *)dirname(outputDir), realOutputDir);
+#else
+          realDirs = realpath((const char *)dirname(dirs), NULL);
+          realOutputDir = realpath((const char *)dirname(outputDir), NULL);
+#endif
 
           if (strncmp(realDirs, realOutputDir, strlen (realOutputDir)) != 0) {
             app_->message(XmlOutputMessages::pathOutsideOutputDirectory,
@@ -1214,6 +1224,11 @@
             }
           }
 
+#ifndef MAXPATHLEN
+	  free(realDirs);
+	  free(realOutputDir);
+#endif
+
 	  // Make the necessary directories
 	  maybeCreateDirectories(dirname(dirs));
 
